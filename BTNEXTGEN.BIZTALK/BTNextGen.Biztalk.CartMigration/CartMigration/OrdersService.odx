#if __DESIGNER_DATA
#error Do not define __DESIGNER_DATA.
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<om:MetaModel MajorVersion="1" MinorVersion="3" Core="2b131234-7959-458d-834f-2dc0769ce683" ScheduleModel="66366196-361d-448d-976f-cab5e87496d2" xmlns:om="http://schemas.microsoft.com/BizTalk/2003/DesignerData">
    <om:Element Type="Module" OID="4e559307-2cd4-4f78-9f29-fd427c15b421" LowerBound="1.1" HigherBound="632.1">
        <om:Property Name="ReportToAnalyst" Value="True" />
        <om:Property Name="Name" Value="CartMigration" />
        <om:Property Name="Signal" Value="False" />
        <om:Element Type="PortType" OID="340b3521-49f5-4b17-9222-6d1e488ad3cf" ParentLink="Module_PortType" LowerBound="24.1" HigherBound="31.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="&lt;wsdl:portType name=&quot;IOrdersService&quot;/&gt;&#xD;&#xA;" />
            <om:Property Name="Name" Value="IOrdersService" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="bfe9e9da-534e-4a53-861d-2412b34326c0" ParentLink="PortType_OperationDeclaration" LowerBound="26.1" HigherBound="30.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="AnalystComments" Value="&lt;wsdl:operation name=&quot;CreateLegacyBaskets&quot;/&gt;&#xD;&#xA;" />
                <om:Property Name="Name" Value="CreateLegacyBaskets" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="f9011940-ced8-4c25-9735-da913fdda0e8" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="28.62" HigherBound="28.110">
                    <om:Property Name="Ref" Value="CartMigration.IOrdersService_CreateLegacyBaskets_OutputMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="AnalystComments" Value="&lt;wsdl:output message=&quot;http://tempuri.org/:IOrdersService_CreateLegacyBaskets_OutputMessage&quot;/&gt;&#xD;&#xA;Action=&quot;http://tempuri.org/IOrdersService/CreateLegacyBasketsResponse&quot;&#xD;&#xA;" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
                <om:Element Type="MessageRef" OID="620a8583-6750-4b9a-bf43-cdf559bedae0" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="28.13" HigherBound="28.60">
                    <om:Property Name="Ref" Value="CartMigration.IOrdersService_CreateLegacyBaskets_InputMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="AnalystComments" Value="&lt;wsdl:input message=&quot;http://tempuri.org/:IOrdersService_CreateLegacyBaskets_InputMessage&quot;/&gt;&#xD;&#xA;Action=&quot;http://tempuri.org/IOrdersService/CreateLegacyBaskets&quot;&#xD;&#xA;" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
                <om:Element Type="MessageRef" OID="f1e8875d-d51f-4837-9a10-a78868ae4abd" ParentLink="OperationDeclaration_FaultMessageRef" LowerBound="28.112" HigherBound="28.137">
                    <om:Property Name="Ref" Value="CartMigration.MultipartType_1" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Fault_1" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="6ec0d5ec-cc94-4d85-a3e2-958be3eb5ddb" ParentLink="Module_PortType" LowerBound="31.1" HigherBound="38.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="ReceiveFromSQLPortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="5f4982e1-9120-4b99-afc5-82207e436c59" ParentLink="PortType_OperationDeclaration" LowerBound="33.1" HigherBound="37.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="3b43f1bb-b857-458e-9cd5-a30c4417aede" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="35.13" HigherBound="35.33">
                    <om:Property Name="Ref" Value="CartMigration.xml_cartmigration_sp" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="f821e796-3153-445e-b451-a6137cad12b9" ParentLink="Module_PortType" LowerBound="38.1" HigherBound="45.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortTypeCallToCommerce" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="5835db94-0a9e-429d-8a38-a38422cc59a2" ParentLink="PortType_OperationDeclaration" LowerBound="40.1" HigherBound="44.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="e7694fbc-bea6-4c8e-8675-16f9ac376cb7" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="42.13" HigherBound="42.60">
                    <om:Property Name="Ref" Value="CartMigration.IOrdersService_CreateLegacyBaskets_InputMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
                <om:Element Type="MessageRef" OID="66cb89f1-4108-4cf7-b602-e07de2a76047" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="42.62" HigherBound="42.110">
                    <om:Property Name="Ref" Value="CartMigration.IOrdersService_CreateLegacyBaskets_OutputMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="a336c827-92b0-4bd0-acc7-572a9403ca04" ParentLink="Module_PortType" LowerBound="45.1" HigherBound="52.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortTypeForTesting" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="267ef832-20d1-4885-95f6-15851d509513" ParentLink="PortType_OperationDeclaration" LowerBound="47.1" HigherBound="51.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="8b531d0a-d966-4f4c-b690-78b4806a5b35" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="49.13" HigherBound="49.63">
                    <om:Property Name="Ref" Value="CartMigration.CartMigrationErrorProcedure_dbo.procSetBasketError" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="c8f9e5d4-2484-4d62-a7e3-3f435f35290e" ParentLink="Module_PortType" LowerBound="52.1" HigherBound="59.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="ArchivedPortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="9d592376-1eb7-4566-a8b1-2ae262ab3a05" ParentLink="PortType_OperationDeclaration" LowerBound="54.1" HigherBound="58.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="1ff8d00a-44e8-454a-aae8-b286feebb6bd" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="56.13" HigherBound="56.33">
                    <om:Property Name="Ref" Value="CartMigration.xml_cartmigration_sp" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="c2ada32e-99a0-4318-9df8-37f9042c01d6" ParentLink="Module_PortType" LowerBound="59.1" HigherBound="66.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="ArchivePortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="f29b92ee-5d97-44c2-91f1-f48eb0c77b1c" ParentLink="PortType_OperationDeclaration" LowerBound="61.1" HigherBound="65.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="b64aac88-a599-4f95-b5e1-44fdb61f4c1c" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="63.13" HigherBound="63.35">
                    <om:Property Name="Ref" Value="System.Xml.XmlDocument" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="6a64b046-6b5a-48dd-8f61-2e7b3e41f306" ParentLink="Module_PortType" LowerBound="66.1" HigherBound="73.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="ArchivePortMessageToCommercePortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="904bf257-4682-40e3-bd35-8c0c98846769" ParentLink="PortType_OperationDeclaration" LowerBound="68.1" HigherBound="72.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="9a9cc563-7d85-44af-acaa-574917076d57" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="70.13" HigherBound="70.35">
                    <om:Property Name="Ref" Value="System.Xml.XmlDocument" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="4cca49c4-6f3a-433a-839d-abad96973bb9" ParentLink="Module_PortType" LowerBound="73.1" HigherBound="80.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortType_1" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="a8f88191-46c4-471a-835c-604609561439" ParentLink="PortType_OperationDeclaration" LowerBound="75.1" HigherBound="79.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="b18f93dc-17c9-4a99-bdc8-40082c7e0258" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="77.13" HigherBound="77.61">
                    <om:Property Name="Ref" Value="CartMigration.IOrdersService_CreateLegacyBaskets_OutputMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="71895faf-0738-4a6e-9383-dd616e1e194c" ParentLink="Module_PortType" LowerBound="80.1" HigherBound="87.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="ArchiveReplyFromCommercePortType" />
            <om:Property Name="Signal" Value="True" />
            <om:Element Type="OperationDeclaration" OID="68646f5f-d52d-42e7-8404-b44a18290173" ParentLink="PortType_OperationDeclaration" LowerBound="82.1" HigherBound="86.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="b5c8822f-d100-4115-8b30-62c58852f969" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="84.13" HigherBound="84.61">
                    <om:Property Name="Ref" Value="CartMigration.IOrdersService_CreateLegacyBaskets_OutputMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="c81a9669-e58b-49fb-aabc-2229efbb1eed" ParentLink="Module_PortType" LowerBound="87.1" HigherBound="94.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="ArchivePortMessageToCommercePortTypes" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="60e9a1c2-3ff6-46c6-b921-c5c8c0188e6c" ParentLink="PortType_OperationDeclaration" LowerBound="89.1" HigherBound="93.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="f27b789b-2ed1-471c-96d8-aae17e027bb2" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="91.13" HigherBound="91.35">
                    <om:Property Name="Ref" Value="System.Xml.XmlDocument" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="e0c881ea-d111-4e3f-925d-59c4789d81f6" ParentLink="Module_PortType" LowerBound="94.1" HigherBound="101.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortType_2" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="853b798f-60a2-4fa1-a81b-56c7f5bd1ec8" ParentLink="PortType_OperationDeclaration" LowerBound="96.1" HigherBound="100.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="1bb06b31-91b1-4cb5-b207-c8eafafa1aa4" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="98.13" HigherBound="98.60">
                    <om:Property Name="Ref" Value="CartMigration.IOrdersService_CreateLegacyBaskets_InputMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="ee9ff951-9f5c-4f22-bc56-4e388199d5a6" ParentLink="Module_PortType" LowerBound="101.1" HigherBound="108.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortType_3" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="78656449-5a57-49c7-8663-0533b9c70550" ParentLink="PortType_OperationDeclaration" LowerBound="103.1" HigherBound="107.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="6b6322ca-faba-424d-ab78-55b42d1e2866" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="105.13" HigherBound="105.63">
                    <om:Property Name="Ref" Value="CartMigration.CartMigrationErrorProcedure_dbo.procSetBasketError" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="28caae4c-0824-4fe2-8992-ad180bf3bc7a" ParentLink="Module_PortType" LowerBound="108.1" HigherBound="115.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortType_4" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="9357fe64-8a36-4b18-ac81-f55dbf26aed0" ParentLink="PortType_OperationDeclaration" LowerBound="110.1" HigherBound="114.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="procSetBasketError" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="MessageRef" OID="33ee0993-9a20-473e-9caf-a706d822dad3" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="112.13" HigherBound="112.63">
                    <om:Property Name="Ref" Value="CartMigration.CartMigrationErrorProcedure_dbo.procSetBasketError" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
                <om:Element Type="MessageRef" OID="d89032f9-8dcd-4e8c-b5b0-76df3a937d36" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="112.65" HigherBound="112.123">
                    <om:Property Name="Ref" Value="CartMigration.CartMigrationErrorProcedure_dbo.procSetBasketErrorResponse" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="46bdb778-b7e4-418d-aede-c4bfa11695a6" ParentLink="Module_PortType" LowerBound="115.1" HigherBound="122.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="FaultPortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="b26bbf5c-cd57-4889-a912-2b0c619bed35" ParentLink="PortType_OperationDeclaration" LowerBound="117.1" HigherBound="121.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="1b00cd8c-4513-4fab-a5cf-eb9b029cfb40" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="119.13" HigherBound="119.82">
                    <om:Property Name="Ref" Value="Microsoft.Practices.ESB.ExceptionHandling.Schemas.Faults.FaultMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="95d93006-e265-4dac-8f01-079ca7a099de" ParentLink="Module_PortType" LowerBound="122.1" HigherBound="129.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="EmailFailurePortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="a29d4560-7cbe-4fbb-bb1c-e1b0e498dc03" ParentLink="PortType_OperationDeclaration" LowerBound="124.1" HigherBound="128.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="09a73859-c4d8-4675-97ad-62adc924d413" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="126.13" HigherBound="126.82">
                    <om:Property Name="Ref" Value="Microsoft.Practices.ESB.ExceptionHandling.Schemas.Faults.FaultMessage" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="82d48f54-a3dd-4a31-94e2-8d6951288369" ParentLink="Module_PortType" LowerBound="129.1" HigherBound="136.1">
            <om:Property Name="Synchronous" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="EmailSQLFailuresFromCommercePortType" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="066a19a0-f749-45a7-ae8b-a22a8a527538" ParentLink="PortType_OperationDeclaration" LowerBound="131.1" HigherBound="135.1">
                <om:Property Name="OperationType" Value="OneWay" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="ee9e387d-dbde-4b54-8688-55d6e468bc6d" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="133.13" HigherBound="133.36">
                    <om:Property Name="Ref" Value="CartMigration.MessageCartsFromSQLType" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="PortType" OID="9d436bf9-7dbf-4c09-82ec-a0fbc0bd049d" ParentLink="Module_PortType" LowerBound="136.1" HigherBound="143.1">
            <om:Property Name="Synchronous" Value="True" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="PortCallWCFServicePortType_2" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="OperationDeclaration" OID="bbf2288b-5432-40cf-824b-05f888f520c3" ParentLink="PortType_OperationDeclaration" LowerBound="138.1" HigherBound="142.1">
                <om:Property Name="OperationType" Value="RequestResponse" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Operation_1" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="MessageRef" OID="81d138d6-bdff-49ae-8654-2e145abc8e61" ParentLink="OperationDeclaration_RequestMessageRef" LowerBound="140.13" HigherBound="140.51">
                    <om:Property Name="Ref" Value="CartMigration.IOrder_tempuri_org.CreateLegacyBaskets" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Request" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="MessageRef" OID="e3d2e961-b2c9-44bc-b0c8-c4b15b361257" ParentLink="OperationDeclaration_ResponseMessageRef" LowerBound="140.53" HigherBound="140.99">
                    <om:Property Name="Ref" Value="CartMigration.IOrder_tempuri_org.CreateLegacyBasketsResponse" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Response" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
            </om:Element>
        </om:Element>
        <om:Element Type="MultipartMessageType" OID="169a8cc2-5917-4d5b-a1d6-761a527eca34" ParentLink="Module_MessageType" LowerBound="4.1" HigherBound="8.1">
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="&lt;wsdl:message name=&quot;IOrdersService_CreateLegacyBasket_InputMessage&quot;/&gt;&#xD;&#xA;" />
            <om:Property Name="Name" Value="IOrdersService_CreateLegacyBasket_InputMessage" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="PartDeclaration" OID="5d621453-f4d2-4c54-9664-ce8bdfc489c7" ParentLink="MultipartMessageType_PartDeclaration" LowerBound="6.1" HigherBound="7.1">
                <om:Property Name="ClassName" Value="CartMigration.IOrder_tempuri_org.CreateLegacyBasket" />
                <om:Property Name="IsBodyPart" Value="True" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="AnalystComments" Value="&lt;wsdl:part name=&quot;parameters&quot;/&gt;&#xD;&#xA;" />
                <om:Property Name="Name" Value="parameters" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
        </om:Element>
        <om:Element Type="MultipartMessageType" OID="ea5a02f7-d97f-4368-9ab8-0e02bd4e4db4" ParentLink="Module_MessageType" LowerBound="8.1" HigherBound="12.1">
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="&lt;wsdl:message name=&quot;IOrdersService_CreateLegacyBasket_OutputMessage&quot;/&gt;&#xD;&#xA;" />
            <om:Property Name="Name" Value="IOrdersService_CreateLegacyBasket_OutputMessage" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="PartDeclaration" OID="0c14eff8-5a36-4946-ab49-1b177f37e710" ParentLink="MultipartMessageType_PartDeclaration" LowerBound="10.1" HigherBound="11.1">
                <om:Property Name="ClassName" Value="CartMigration.IOrder_tempuri_org.CreateLegacyBasketResponse" />
                <om:Property Name="IsBodyPart" Value="True" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="AnalystComments" Value="&lt;wsdl:part name=&quot;parameters&quot;/&gt;&#xD;&#xA;" />
                <om:Property Name="Name" Value="parameters" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
        </om:Element>
        <om:Element Type="MultipartMessageType" OID="032c7d7c-dc6a-4600-9948-e6c8c33b0939" ParentLink="Module_MessageType" LowerBound="12.1" HigherBound="16.1">
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="&lt;wsdl:message name=&quot;IOrdersService_CreateLegacyBaskets_InputMessage&quot;/&gt;&#xD;&#xA;" />
            <om:Property Name="Name" Value="IOrdersService_CreateLegacyBaskets_InputMessage" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="PartDeclaration" OID="d3f6c815-77aa-4c40-8ffc-3ee7f953fe7a" ParentLink="MultipartMessageType_PartDeclaration" LowerBound="14.1" HigherBound="15.1">
                <om:Property Name="ClassName" Value="CartMigration.IOrder_tempuri_org.CreateLegacyBaskets" />
                <om:Property Name="IsBodyPart" Value="True" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="AnalystComments" Value="&lt;wsdl:part name=&quot;parameters&quot;/&gt;&#xD;&#xA;" />
                <om:Property Name="Name" Value="parameters" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
        </om:Element>
        <om:Element Type="MultipartMessageType" OID="a3ed89e2-360c-42ef-a3c9-da050d23353c" ParentLink="Module_MessageType" LowerBound="16.1" HigherBound="20.1">
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="&lt;wsdl:message name=&quot;IOrdersService_CreateLegacyBaskets_OutputMessage&quot;/&gt;&#xD;&#xA;" />
            <om:Property Name="Name" Value="IOrdersService_CreateLegacyBaskets_OutputMessage" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="PartDeclaration" OID="3a207621-d0e7-49c5-92f2-233427db22dc" ParentLink="MultipartMessageType_PartDeclaration" LowerBound="18.1" HigherBound="19.1">
                <om:Property Name="ClassName" Value="CartMigration.IOrder_tempuri_org.CreateLegacyBasketsResponse" />
                <om:Property Name="IsBodyPart" Value="True" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="AnalystComments" Value="&lt;wsdl:part name=&quot;parameters&quot;/&gt;&#xD;&#xA;" />
                <om:Property Name="Name" Value="parameters" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
        </om:Element>
        <om:Element Type="MultipartMessageType" OID="bb235b49-d725-46a5-8135-2d34f23e3d8e" ParentLink="Module_MessageType" LowerBound="20.1" HigherBound="24.1">
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="Name" Value="MultipartType_1" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="PartDeclaration" OID="b76915c3-60fb-4431-9681-70de8d141d8b" ParentLink="MultipartMessageType_PartDeclaration" LowerBound="22.1" HigherBound="23.1">
                <om:Property Name="ClassName" Value="BTS.soap_envelope_1__1.Fault" />
                <om:Property Name="IsBodyPart" Value="True" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessagePart_1" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
        </om:Element>
        <om:Element Type="ServiceDeclaration" OID="0605dc94-f0a4-4fd9-8093-7cba22a8cb84" ParentLink="Module_ServiceDeclaration" LowerBound="143.1" HigherBound="631.1">
            <om:Property Name="InitializedTransactionType" Value="False" />
            <om:Property Name="IsInvokable" Value="False" />
            <om:Property Name="TypeModifier" Value="Internal" />
            <om:Property Name="ReportToAnalyst" Value="True" />
            <om:Property Name="AnalystComments" Value="&lt;wsdl:service name=&quot;OrdersService&quot;/&gt;&#xD;&#xA;" />
            <om:Property Name="Name" Value="OrdersServiceClient" />
            <om:Property Name="Signal" Value="False" />
            <om:Element Type="VariableDeclaration" OID="e41b282a-743e-4c33-88e1-5b8c882732e6" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="183.1" HigherBound="184.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="sErrorMessageSQL" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="30e3779b-b455-4b90-ba79-d2629cf97454" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="184.1" HigherBound="185.1">
                <om:Property Name="InitialValue" Value="0" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Int32" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="nRecordCount" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="528edc0d-590d-4712-9e88-e6fec529065b" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="185.1" HigherBound="186.1">
                <om:Property Name="InitialValue" Value="1" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Int32" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="nLoopCount" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="e1c5ddad-3e0e-42af-8d94-bcad6081e020" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="186.1" HigherBound="187.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="sXpath" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="aae138c2-c783-4b15-a834-a6e1fcb116e7" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="187.1" HigherBound="188.1">
                <om:Property Name="UseDefaultConstructor" Value="True" />
                <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="xDoc" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="a4928521-7b06-4a61-86a5-03049a8e81f0" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="188.1" HigherBound="189.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="sStatus" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="2d31d458-d579-412a-8aad-bc479868e85b" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="189.1" HigherBound="190.1">
                <om:Property Name="UseDefaultConstructor" Value="True" />
                <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="xDoctemp" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="c891f617-18ec-462d-b728-3199dcba2053" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="190.1" HigherBound="191.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="varIsEmailForTesting" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="1ece5f90-3b33-4bb4-8367-37ec8cd0eee0" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="191.1" HigherBound="192.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="varIsArchive_MessageFromSQL" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="d512c791-dc79-4f18-8dec-2bd1ada6e1a9" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="192.1" HigherBound="193.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="varIsArchive_MessageToCommerceRequest" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="30778c89-1731-43c3-867b-4b0ef4efbfbc" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="193.1" HigherBound="194.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="varIsArchive_MessageFromCommerceReply" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="7f094e15-8711-47f7-940a-97cb7684ee70" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="194.1" HigherBound="195.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="varIsArchive_MessageToSQL" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="9c1c1bcf-d77a-47c9-8fa7-e25da6e3588e" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="195.1" HigherBound="196.1">
                <om:Property Name="InitialValue" Value="true" />
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Boolean" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="varIsEmailForSQLFailuresFromCommerce" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="90715708-c23d-4092-85a8-cbad23218b61" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="196.1" HigherBound="197.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.String" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="sErrorMessage" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="49dbb7b2-c2db-42d7-820f-3b98738c6c55" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="197.1" HigherBound="198.1">
                <om:Property Name="UseDefaultConstructor" Value="True" />
                <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="varXMLDummy" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="faf30bdb-cdf8-413c-a4d0-f220b915d10b" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="198.1" HigherBound="199.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Int32" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="nRecordCountTS3" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="d569beca-6799-4e3c-9a39-ade967da245a" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="199.1" HigherBound="200.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Int32" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="nRecordCountBTLOL" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="VariableDeclaration" OID="95020d6e-6691-4e57-a24f-c9b5138ecb1a" ParentLink="ServiceDeclaration_VariableDeclaration" LowerBound="200.1" HigherBound="201.1">
                <om:Property Name="UseDefaultConstructor" Value="False" />
                <om:Property Name="Type" Value="System.Int32" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="varSQLOk" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="ad76d509-2a4a-421e-8407-06a15dccc91d" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="166.1" HigherBound="167.1">
                <om:Property Name="Type" Value="CartMigration.CartMigrationErrorProcedure_dbo.procSetBasketError" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageSingleInputMapped" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="07372111-790e-427d-8a95-ad72b8718a05" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="167.1" HigherBound="168.1">
                <om:Property Name="Type" Value="CartMigration.xml_cartmigration_sp" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageCartsFromSQL" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="8bda849c-ee58-44bc-89c6-175b29804788" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="168.1" HigherBound="169.1">
                <om:Property Name="Type" Value="CartMigration.IOrdersService_CreateLegacyBaskets_InputMessage" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageCartsToCommerceRequest" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="ad2af98b-18a0-4b47-9cc2-3526949b91fb" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="169.1" HigherBound="170.1">
                <om:Property Name="Type" Value="CartMigration.IOrdersService_CreateLegacyBaskets_OutputMessage" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageCartsFrCommerceReply" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="d5180acb-c410-41e0-a5cb-27c91dd990b9" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="170.1" HigherBound="171.1">
                <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ArchiveMessageFromSQL" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="ba89aa4e-79a0-4401-975f-26105ee17622" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="171.1" HigherBound="172.1">
                <om:Property Name="Type" Value="CartMigration.IOrdersService_CreateLegacyBaskets_InputMessage" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ArchiveMessageCartsToCommerceRequest" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="7430b49d-3f95-4b6f-9b27-89d99533f928" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="172.1" HigherBound="173.1">
                <om:Property Name="Type" Value="CartMigration.IOrdersService_CreateLegacyBaskets_OutputMessage" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ArchiveMessageCartsFrCommerceReply" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="f45530c5-d3de-41a7-8f36-c4a9fbe4220c" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="173.1" HigherBound="174.1">
                <om:Property Name="Type" Value="CartMigration.CartMigrationErrorBackupSchema" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageReplyCommerceBackup" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="cb16b721-a0f4-4b24-a7b1-a09a0da65419" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="174.1" HigherBound="175.1">
                <om:Property Name="Type" Value="CartMigration.MessageCartsFromSQLType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageSingleInput" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="784bddbb-ab5f-448d-ac2d-96ad63b608bc" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="175.1" HigherBound="176.1">
                <om:Property Name="Type" Value="CartMigration.CartMigrationErrorProcedure_dbo.procSetBasketErrorResponse" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageCartsFromSQLErrorUpdateResponse" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="e9342659-d762-4474-95b2-2500f06cdd23" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="176.1" HigherBound="177.1">
                <om:Property Name="Type" Value="CartMigration.CartMigrationErrorProcedure_dbo.procSetBasketError" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ArchiveMessageToSQLRequest" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="7c7c6cc2-9938-4eb3-a944-0dca8ba5f98a" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="177.1" HigherBound="178.1">
                <om:Property Name="Type" Value="Microsoft.Practices.ESB.ExceptionHandling.Schemas.Faults.FaultMessage" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="FaultMessage" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="005bac55-42a3-4d3f-9b07-1b0bc3692332" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="178.1" HigherBound="179.1">
                <om:Property Name="Type" Value="System.Xml.XmlDocument" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageDummyCartsFromSQL" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="79fb3cab-0bee-4a3b-ae15-8d8331fa1696" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="179.1" HigherBound="180.1">
                <om:Property Name="Type" Value="CartMigration.MessageCartsFromSQLType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageSingleInputEmail" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="9369e932-3461-46ff-ac52-cb3720659814" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="180.1" HigherBound="181.1">
                <om:Property Name="Type" Value="CartMigration.CartMigrationRequestBackup" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageRequestCommerceBackup" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="29109aab-cb41-4448-a984-f6b77c9ce886" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="181.1" HigherBound="182.1">
                <om:Property Name="Type" Value="CartMigration.MultipartType_1" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="Message_1" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="MessageDeclaration" OID="bd4d3898-b014-4517-83f0-98d275a2971e" ParentLink="ServiceDeclaration_MessageDeclaration" LowerBound="182.1" HigherBound="183.1">
                <om:Property Name="Type" Value="CartMigration.CartMigrationRequestBackup" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="MessageRequestCommerceRequestBackupScope2" />
                <om:Property Name="Signal" Value="True" />
            </om:Element>
            <om:Element Type="ServiceBody" OID="5d9f8590-17aa-447a-8b8b-96dc0ba9aa7f" ParentLink="ServiceDeclaration_ServiceBody">
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="Receive" OID="bb38dfe6-4971-428d-ac54-730e47c30c02" ParentLink="ServiceBody_Statement" LowerBound="203.1" HigherBound="220.1">
                    <om:Property Name="Activate" Value="True" />
                    <om:Property Name="PortName" Value="ReceiveCartsPortFromSQL" />
                    <om:Property Name="MessageName" Value="MessageCartsFromSQL" />
                    <om:Property Name="OperationName" Value="Operation_1" />
                    <om:Property Name="OperationMessageName" Value="Request" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="ReceiveCartsShapeFromSQL" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="VariableAssignment" OID="c69f03ee-9e7a-462c-8131-ebaff95c56ac" ParentLink="ServiceBody_Statement" LowerBound="220.1" HigherBound="226.1">
                    <om:Property Name="Expression" Value="// 0 = have not hit the call to WCF service to push carts to Commerce Server. &#xD;&#xA;// 1 = after the call to WCF service and updating the status to failed is not allowed. &#xD;&#xA;varSQLOk = 0; &#xD;&#xA;&#xD;&#xA;//varSQLOk = varSQLOk / varSQLOk; " />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="SetVar" />
                    <om:Property Name="Signal" Value="True" />
                </om:Element>
                <om:Element Type="Construct" OID="7629e2d5-2755-45fb-bff2-eeeade1b6a4a" ParentLink="ServiceBody_Statement" LowerBound="226.1" HigherBound="234.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="ConstructDummy_MessageReplyCommerceBackup" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="MessageRef" OID="373689c9-a3a8-42f4-a7b2-3537db00afde" ParentLink="Construct_MessageRef" LowerBound="227.23" HigherBound="227.49">
                        <om:Property Name="Ref" Value="MessageReplyCommerceBackup" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="MessageAssignment" OID="84e7fa1f-e954-4d30-9edd-e86d82eac92c" ParentLink="ComplexStatement_Statement" LowerBound="229.1" HigherBound="233.1">
                        <om:Property Name="Expression" Value="varXMLDummy = new System.Xml.XmlDocument();&#xD;&#xA;varXMLDummy.LoadXml(@&quot;&lt;CreateLegacyBasketsResponse xmlns=&quot;&quot;http://tempuri.org/&quot;&quot;&gt;&lt;CreateLegacyBasketsResult xmlns:a=&quot;&quot;http://schemas.datacontract.org/2004/07/BTNextGen.Services.IOrders&quot;&quot; xmlns:i=&quot;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&quot;&gt;&lt;a:BasketDetailsResponse&gt;&lt;a:ErrorMessage&gt; &lt;/a:ErrorMessage&gt;&lt;a:LegacyBasketId&gt;13759439&lt;/a:LegacyBasketId&gt;&lt;a:LegacySourceSystem&gt;TS3&lt;/a:LegacySourceSystem&gt;&lt;a:LoadStatus&gt;Loaded&lt;/a:LoadStatus&gt;&lt;/a:BasketDetailsResponse&gt;&lt;/CreateLegacyBasketsResult&gt;&lt;/CreateLegacyBasketsResponse&gt;&quot;);&#xD;&#xA;MessageReplyCommerceBackup = varXMLDummy; &#xD;&#xA;" />
                        <om:Property Name="ReportToAnalyst" Value="False" />
                        <om:Property Name="Name" Value="MessageAssignment_4" />
                        <om:Property Name="Signal" Value="True" />
                    </om:Element>
                </om:Element>
                <om:Element Type="Construct" OID="9ed1de09-f7b9-47c3-9edc-b64b87d50385" ParentLink="ServiceBody_Statement" LowerBound="234.1" HigherBound="240.1">
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="ConstructDummy_MessageReqiestCommerceBackup" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="MessageRef" OID="41f6774e-3a68-4a6d-9c59-f14be4a1d406" ParentLink="Construct_MessageRef" LowerBound="235.23" HigherBound="235.51">
                        <om:Property Name="Ref" Value="MessageRequestCommerceBackup" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="Transform" OID="9a25227a-c822-4448-937f-cec3870e7638" ParentLink="ComplexStatement_Statement" LowerBound="237.1" HigherBound="239.1">
                        <om:Property Name="ClassName" Value="CartMigration.Transform_4" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Transform_Sqltobackup" />
                        <om:Property Name="Signal" Value="False" />
                        <om:Element Type="MessagePartRef" OID="bcbc3d29-abde-45d7-ba3e-9f3f4362fc30" ParentLink="Transform_InputMessagePartRef" LowerBound="238.87" HigherBound="238.106">
                            <om:Property Name="MessageRef" Value="MessageCartsFromSQL" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="MessagePartReference_15" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                        <om:Element Type="MessagePartRef" OID="fa9ae548-327c-45ae-a8f8-75333d9f02f8" ParentLink="Transform_OutputMessagePartRef" LowerBound="238.28" HigherBound="238.56">
                            <om:Property Name="MessageRef" Value="MessageRequestCommerceBackup" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="MessagePartReference_16" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                    </om:Element>
                </om:Element>
                <om:Element Type="Scope" OID="fcad5daa-d082-40ee-81d6-caf4039af3f4" ParentLink="ServiceBody_Statement" LowerBound="240.1" HigherBound="629.1">
                    <om:Property Name="InitializedTransactionType" Value="True" />
                    <om:Property Name="IsSynchronized" Value="False" />
                    <om:Property Name="ReportToAnalyst" Value="True" />
                    <om:Property Name="Name" Value="Scope_1" />
                    <om:Property Name="Signal" Value="True" />
                    <om:Element Type="VariableAssignment" OID="aba46766-f9a4-45b9-9414-f1876a27c211" ParentLink="ComplexStatement_Statement" LowerBound="245.1" HigherBound="253.1">
                        <om:Property Name="Expression" Value="varIsEmailForTesting=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read(&quot;BTNextGen.Biztalk.CartMigration&quot;,&quot;EmailForTesting&quot;));&#xD;&#xA;varIsArchive_MessageFromSQL=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read(&quot;BTNextGen.Biztalk.CartMigration&quot;,&quot;Archive_MessageFromSQL&quot;)); &#xD;&#xA;varIsArchive_MessageToCommerceRequest=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read(&quot;BTNextGen.Biztalk.CartMigration&quot;,&quot;Archive_MessageToCommerceRequest&quot;)); &#xD;&#xA;varIsArchive_MessageFromCommerceReply=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read(&quot;BTNextGen.Biztalk.CartMigration&quot;,&quot;Archive_MessageFromCommerceReply&quot;)); &#xD;&#xA;varIsArchive_MessageToSQL=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read(&quot;BTNextGen.Biztalk.CartMigration&quot;,&quot;Archive_MessageToSQL&quot;)); &#xD;&#xA;varIsEmailForSQLFailuresFromCommerce=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read(&quot;BTNextGen.Biztalk.CartMigration&quot;,&quot;EmailForSQLFailuresFromCommerce&quot;)); &#xD;&#xA;&#xD;&#xA;" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="getSSO" />
                        <om:Property Name="Signal" Value="True" />
                    </om:Element>
                    <om:Element Type="Decision" OID="f7a5f903-fa56-4afb-b007-11ab7b1f4ebb" ParentLink="ComplexStatement_Statement" LowerBound="253.1" HigherBound="266.1">
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Decide_ArchiveMessageFromSQL" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="DecisionBranch" OID="2b2189ba-4316-4fd7-8e1d-b6c24832b3be" ParentLink="ReallyComplexStatement_Branch" LowerBound="254.21" HigherBound="266.1">
                            <om:Property Name="Expression" Value="varIsArchive_MessageFromSQL == true" />
                            <om:Property Name="IsGhostBranch" Value="True" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ArchiveMessageFromSQL?" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Construct" OID="179977b0-f935-4a77-9822-bfcda2374cce" ParentLink="ComplexStatement_Statement" LowerBound="256.1" HigherBound="263.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="ConstructArchiveMessage" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="MessageRef" OID="50b542f4-d51b-49f9-918d-292b4a2f6d3b" ParentLink="Construct_MessageRef" LowerBound="257.35" HigherBound="257.56">
                                    <om:Property Name="Ref" Value="ArchiveMessageFromSQL" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="MessageAssignment" OID="917b8573-3efd-4eab-8168-f8a26758d4a0" ParentLink="ComplexStatement_Statement" LowerBound="259.1" HigherBound="262.1">
                                    <om:Property Name="Expression" Value="ArchiveMessageFromSQL = MessageCartsFromSQL; &#xD;&#xA;ArchiveMessageFromSQL(FILE.ReceivedFileName)=&quot;MessageCartsFromSQL&quot;; " />
                                    <om:Property Name="ReportToAnalyst" Value="False" />
                                    <om:Property Name="Name" Value="MessageAssignment_1" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="Send" OID="b6ae52a9-75b4-448a-bfbc-d1ee8b84a559" ParentLink="ComplexStatement_Statement" LowerBound="263.1" HigherBound="265.1">
                                <om:Property Name="PortName" Value="ArchivePort_MessageFromSQL" />
                                <om:Property Name="MessageName" Value="ArchiveMessageFromSQL" />
                                <om:Property Name="OperationName" Value="Operation_1" />
                                <om:Property Name="OperationMessageName" Value="Request" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="SendArchive" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="DecisionBranch" OID="a2f68d9f-fe03-403c-88e1-fc7a348beb82" ParentLink="ReallyComplexStatement_Branch">
                            <om:Property Name="IsGhostBranch" Value="True" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Else" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                    </om:Element>
                    <om:Element Type="Construct" OID="46b2865a-2434-49a6-9299-f22c4a4ce30a" ParentLink="ComplexStatement_Statement" LowerBound="266.1" HigherBound="272.1">
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="ConstructMessageFromSQLToCommerce" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Transform" OID="9d3b1498-c549-4c4c-8a4a-1b9c13ba6db5" ParentLink="ComplexStatement_Statement" LowerBound="269.1" HigherBound="271.1">
                            <om:Property Name="ClassName" Value="CartMigration.Transform_sql_to_commerce" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="TransformSQLToCommerce" />
                            <om:Property Name="Signal" Value="False" />
                            <om:Element Type="MessagePartRef" OID="9842b34a-1dea-445a-aa24-d498ee81d047" ParentLink="Transform_InputMessagePartRef" LowerBound="270.121" HigherBound="270.140">
                                <om:Property Name="MessageRef" Value="MessageCartsFromSQL" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="MessagePartReference_1" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="MessagePartRef" OID="f80b72ea-fed7-44ab-94d4-9e2e5c37589b" ParentLink="Transform_OutputMessagePartRef" LowerBound="270.36" HigherBound="270.76">
                                <om:Property Name="MessageRef" Value="MessageCartsToCommerceRequest" />
                                <om:Property Name="PartRef" Value="parameters" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="MessagePartReference_2" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="MessageRef" OID="7839b7b8-ca72-4279-aeb6-4270d15c26a7" ParentLink="Construct_MessageRef" LowerBound="267.31" HigherBound="267.60">
                            <om:Property Name="Ref" Value="MessageCartsToCommerceRequest" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                    </om:Element>
                    <om:Element Type="Decision" OID="732f0b7e-3b39-42c2-871d-fb7400cd067c" ParentLink="ComplexStatement_Statement" LowerBound="272.1" HigherBound="285.1">
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Decide_ArchiveMessageToCommerceRequest" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="DecisionBranch" OID="e3ef14bf-9174-42c0-8192-19af36928283" ParentLink="ReallyComplexStatement_Branch" LowerBound="273.21" HigherBound="285.1">
                            <om:Property Name="Expression" Value="varIsArchive_MessageToCommerceRequest == true" />
                            <om:Property Name="IsGhostBranch" Value="True" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ArchiveMsgToCommerceRequest?" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Construct" OID="8d4f1ba6-b9d7-4960-956c-fae6932e6d02" ParentLink="ComplexStatement_Statement" LowerBound="275.1" HigherBound="282.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="ConstructArchiveMessageCartsToCommerceRequest" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="MessageRef" OID="966da0fc-496f-4185-b039-b4e40a4f5c51" ParentLink="Construct_MessageRef" LowerBound="276.35" HigherBound="276.71">
                                    <om:Property Name="Ref" Value="ArchiveMessageCartsToCommerceRequest" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="MessageAssignment" OID="e74c0d09-41c6-48a8-b149-3e13a6f759aa" ParentLink="ComplexStatement_Statement" LowerBound="278.1" HigherBound="281.1">
                                    <om:Property Name="Expression" Value="ArchiveMessageCartsToCommerceRequest = MessageCartsToCommerceRequest; &#xD;&#xA;ArchiveMessageCartsToCommerceRequest(FILE.ReceivedFileName)=&quot;MessageCartsToCommerceRequest&quot;; " />
                                    <om:Property Name="ReportToAnalyst" Value="False" />
                                    <om:Property Name="Name" Value="MessageAssignment_1" />
                                    <om:Property Name="Signal" Value="True" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="Send" OID="220d979c-9aaa-4610-8edb-e98d1e0b3f4b" ParentLink="ComplexStatement_Statement" LowerBound="282.1" HigherBound="284.1">
                                <om:Property Name="PortName" Value="ArchivePort_MessageCartsToCommerceRequest" />
                                <om:Property Name="MessageName" Value="ArchiveMessageCartsToCommerceRequest" />
                                <om:Property Name="OperationName" Value="Operation_1" />
                                <om:Property Name="OperationMessageName" Value="Request" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="SendArchive" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="DecisionBranch" OID="80722db2-9cc8-4197-97bd-e11b0dfa15d1" ParentLink="ReallyComplexStatement_Branch">
                            <om:Property Name="IsGhostBranch" Value="True" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Else" />
                            <om:Property Name="Signal" Value="False" />
                        </om:Element>
                    </om:Element>
                    <om:Element Type="Scope" OID="9c2a1141-de57-4da9-afe8-a73f72fae4f2" ParentLink="ComplexStatement_Statement" LowerBound="285.1" HigherBound="455.1">
                        <om:Property Name="InitializedTransactionType" Value="True" />
                        <om:Property Name="IsSynchronized" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Scope_2" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Construct" OID="d096f110-4a1d-4805-97f0-3a7cd0853570" ParentLink="ComplexStatement_Statement" LowerBound="290.1" HigherBound="296.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ConstructBasketRequestToDifferentFormat" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Transform" OID="6e313f88-5eda-4a73-b96b-15274ca98330" ParentLink="ComplexStatement_Statement" LowerBound="293.1" HigherBound="295.1">
                                <om:Property Name="ClassName" Value="CartMigration.Transform_5" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Transform_5" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="MessagePartRef" OID="85f465e7-993d-470b-a9bf-d0addb36d675" ParentLink="Transform_InputMessagePartRef" LowerBound="294.103" HigherBound="294.143">
                                    <om:Property Name="MessageRef" Value="MessageCartsToCommerceRequest" />
                                    <om:Property Name="PartRef" Value="parameters" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="MessagePartReference_19" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="MessagePartRef" OID="2e3cb518-b73f-4e56-adc5-e4faf2efbd77" ParentLink="Transform_OutputMessagePartRef" LowerBound="294.44" HigherBound="294.72">
                                    <om:Property Name="MessageRef" Value="MessageRequestCommerceBackup" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="MessagePartReference_20" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="MessageRef" OID="99bc17a4-a572-4b15-8c59-7a5dcd2b90a0" ParentLink="Construct_MessageRef" LowerBound="291.39" HigherBound="291.67">
                                <om:Property Name="Ref" Value="MessageRequestCommerceBackup" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Send" OID="36b5d7cb-f9b7-4627-8651-a1179b280921" ParentLink="ComplexStatement_Statement" LowerBound="296.1" HigherBound="298.1">
                            <om:Property Name="PortName" Value="PortCallWCFService" />
                            <om:Property Name="MessageName" Value="MessageCartsToCommerceRequest" />
                            <om:Property Name="OperationName" Value="CreateLegacyBaskets" />
                            <om:Property Name="OperationMessageName" Value="Request" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="SendShapeToCommerce" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Receive" OID="0cc4ee17-0a93-4e4d-8a4b-37eae9d0871a" ParentLink="ComplexStatement_Statement" LowerBound="298.1" HigherBound="300.1">
                            <om:Property Name="Activate" Value="False" />
                            <om:Property Name="PortName" Value="PortCallWCFService" />
                            <om:Property Name="MessageName" Value="MessageCartsFrCommerceReply" />
                            <om:Property Name="OperationName" Value="CreateLegacyBaskets" />
                            <om:Property Name="OperationMessageName" Value="Response" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ReceiveShapeFromCommerce" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="VariableAssignment" OID="35914f55-c9de-4ca7-adb6-a6df2efb12b5" ParentLink="ComplexStatement_Statement" LowerBound="300.1" HigherBound="304.1">
                            <om:Property Name="Expression" Value="// 0 = have not hit the call to WCF service to push carts to Commerce Server. &#xD;&#xA;// 1 = after the call to WCF service and updating the status to failed is not allowed. &#xD;&#xA;varSQLOk = 1; " />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="SetVar" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Decision" OID="d5a58c48-844d-45b4-a265-f2acb536e00c" ParentLink="ComplexStatement_Statement" LowerBound="304.1" HigherBound="317.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Decide_ArchiveMessageFromCommerceReply" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="DecisionBranch" OID="475e2bee-eb4e-45c6-9a79-6396865a4ccd" ParentLink="ReallyComplexStatement_Branch" LowerBound="305.29" HigherBound="317.1">
                                <om:Property Name="Expression" Value="varIsArchive_MessageFromCommerceReply == true" />
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="ArchiveMsgFromCommerceReply?" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="Construct" OID="80cf3955-1cc7-4cb0-9384-be0bec2e1216" ParentLink="ComplexStatement_Statement" LowerBound="307.1" HigherBound="314.1">
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="ConstructArchiveMessageCartsFrCommerceReply" />
                                    <om:Property Name="Signal" Value="True" />
                                    <om:Element Type="MessageRef" OID="2ea2478b-9f35-48e5-b34e-31e64014b86a" ParentLink="Construct_MessageRef" LowerBound="308.43" HigherBound="308.77">
                                        <om:Property Name="Ref" Value="ArchiveMessageCartsFrCommerceReply" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                    <om:Element Type="MessageAssignment" OID="18979352-ce34-4a0c-8944-7781be84dff7" ParentLink="ComplexStatement_Statement" LowerBound="310.1" HigherBound="313.1">
                                        <om:Property Name="Expression" Value="ArchiveMessageCartsFrCommerceReply = MessageCartsFrCommerceReply; &#xD;&#xA;ArchiveMessageCartsFrCommerceReply(FILE.ReceivedFileName)=&quot;MessageCartsFrCommerceReply&quot;; " />
                                        <om:Property Name="ReportToAnalyst" Value="False" />
                                        <om:Property Name="Name" Value="MessageAssignment_1" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="Send" OID="081d91f9-3274-4688-b092-8165e98aed83" ParentLink="ComplexStatement_Statement" LowerBound="314.1" HigherBound="316.1">
                                    <om:Property Name="PortName" Value="ArchivePort_MessageCartsFrCommerceReply" />
                                    <om:Property Name="MessageName" Value="ArchiveMessageCartsFrCommerceReply" />
                                    <om:Property Name="OperationName" Value="Operation_1" />
                                    <om:Property Name="OperationMessageName" Value="Request" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="SendArchive" />
                                    <om:Property Name="Signal" Value="True" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="DecisionBranch" OID="cf11d37a-a65d-4ae8-8014-5586a40aabec" ParentLink="ReallyComplexStatement_Branch">
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Else" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Construct" OID="c1307eeb-757f-460e-86a3-54ff09fee96b" ParentLink="ComplexStatement_Statement" LowerBound="317.1" HigherBound="323.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ConstructBasketReplyToDifferentFormat" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Transform" OID="f70381f7-ecbd-41d5-b025-280c3a79375b" ParentLink="ComplexStatement_Statement" LowerBound="320.1" HigherBound="322.1">
                                <om:Property Name="ClassName" Value="CartMigration.TransformCommerceReplyToBackup" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Transform_CommerceReplyToBackup" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="MessagePartRef" OID="523abcff-b45d-4c9f-95d9-cd819e9b53e9" ParentLink="Transform_InputMessagePartRef" LowerBound="321.120" HigherBound="321.158">
                                    <om:Property Name="MessageRef" Value="MessageCartsFrCommerceReply" />
                                    <om:Property Name="PartRef" Value="parameters" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="MessagePartReference_3" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="MessagePartRef" OID="a655061f-30ff-457c-8125-239558b17f1a" ParentLink="Transform_OutputMessagePartRef" LowerBound="321.44" HigherBound="321.70">
                                    <om:Property Name="MessageRef" Value="MessageReplyCommerceBackup" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="MessagePartReference_4" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="MessageRef" OID="6c961ea6-d9b3-417a-a084-af29b997dd21" ParentLink="Construct_MessageRef" LowerBound="318.39" HigherBound="318.65">
                                <om:Property Name="Ref" Value="MessageReplyCommerceBackup" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Catch" OID="4f959f2a-c83b-4b82-8010-f0f905a06f56" ParentLink="Scope_Catch" LowerBound="326.1" HigherBound="453.1">
                            <om:Property Name="ExceptionName" Value="ex" />
                            <om:Property Name="ExceptionType" Value="PortCallWCFService.CreateLegacyBaskets.Fault_1" />
                            <om:Property Name="IsFaultMessage" Value="False" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="CatchException_2" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="Construct" OID="c136d702-11e1-4d2c-8a9d-b162c3af5465" ParentLink="Catch_Statement" LowerBound="329.1" HigherBound="347.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="ConstructFaultMessage" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="MessageRef" OID="66bff231-f87b-43cf-8c69-4ac86afa1ac0" ParentLink="Construct_MessageRef" LowerBound="330.43" HigherBound="330.55">
                                    <om:Property Name="Ref" Value="FaultMessage" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                                <om:Element Type="MessageAssignment" OID="52c407b9-c4d8-4684-8225-07f6fe0d275f" ParentLink="ComplexStatement_Statement" LowerBound="332.1" HigherBound="346.1">
                                    <om:Property Name="Expression" Value="xDoc = ex.MessagePart_1;&#xD;&#xA;sErrorMessage = xDoc.OuterXml;&#xD;&#xA;// Create fault exception Message&#xD;&#xA;FaultMessage= Microsoft.Practices.ESB.ExceptionHandling.ExceptionMgmt.CreateFaultMessage();&#xD;&#xA;&#xD;&#xA;// Assign Properties&#xD;&#xA;FaultMessage.FailureCategory=&quot;CartMigration Exception&quot;;&#xD;&#xA;FaultMessage.FaultDescription=sErrorMessage;&#xD;&#xA;FaultMessage.FaultCode=&quot;3001&quot;;&#xD;&#xA;FaultMessage.FaultSeverity= Microsoft.Practices.ESB.ExceptionHandling.FaultSeverity.Severe;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
                                    <om:Property Name="ReportToAnalyst" Value="False" />
                                    <om:Property Name="Name" Value="MessageAssignment_3" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="Send" OID="bb7ed407-b4f9-4842-8a82-4eae4f72d4f4" ParentLink="Catch_Statement" LowerBound="347.1" HigherBound="349.1">
                                <om:Property Name="PortName" Value="FaultPort" />
                                <om:Property Name="MessageName" Value="FaultMessage" />
                                <om:Property Name="OperationName" Value="Operation_1" />
                                <om:Property Name="OperationMessageName" Value="Request" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="SendFaultMessage" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                            <om:Element Type="Decision" OID="3b005b02-b6db-4cfe-bfcd-a76fe2384906" ParentLink="Catch_Statement" LowerBound="349.1" HigherBound="357.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="DecideEmailTesting" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="DecisionBranch" OID="dc860cc2-dd8d-4d86-bc6f-49f2db7748e1" ParentLink="ReallyComplexStatement_Branch" LowerBound="350.33" HigherBound="357.1">
                                    <om:Property Name="Expression" Value="varIsEmailForTesting == true" />
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Testing" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="VariableAssignment" OID="9884c538-62a7-4471-820c-15922c211286" ParentLink="ComplexStatement_Statement" LowerBound="352.1" HigherBound="354.1">
                                        <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;CartMigration-2&quot;,sErrorMessage );" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Expression_2" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                    <om:Element Type="Send" OID="ea57bf14-383f-44ab-a39a-6ab0238ced99" ParentLink="ComplexStatement_Statement" LowerBound="354.1" HigherBound="356.1">
                                        <om:Property Name="PortName" Value="EmailFailurePort" />
                                        <om:Property Name="MessageName" Value="FaultMessage" />
                                        <om:Property Name="OperationName" Value="Operation_1" />
                                        <om:Property Name="OperationMessageName" Value="Request" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="SendEmailFailure22" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="DecisionBranch" OID="e77feebd-9399-4729-8c5c-1134e9dd44da" ParentLink="ReallyComplexStatement_Branch">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Else" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="Decision" OID="9f456258-f8f6-4e6a-896c-02d45658924b" ParentLink="Catch_Statement" LowerBound="357.1" HigherBound="365.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Decide_EmailForTesting" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="DecisionBranch" OID="9f8d345f-9041-4c54-bd20-a1921e407269" ParentLink="ReallyComplexStatement_Branch" LowerBound="358.33" HigherBound="365.1">
                                    <om:Property Name="Expression" Value="varIsEmailForTesting == true" />
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="EmailForTesting?" />
                                    <om:Property Name="Signal" Value="False" />
                                    <om:Element Type="VariableAssignment" OID="ecb0cd8a-325d-4626-a0d9-d59473a9e784" ParentLink="ComplexStatement_Statement" LowerBound="360.1" HigherBound="362.1">
                                        <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;CartMigration-2&quot;,sErrorMessage );" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Expression_1" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                    <om:Element Type="Send" OID="d1ca781a-10c3-4857-abbe-9e1e0793e531" ParentLink="ComplexStatement_Statement" LowerBound="362.1" HigherBound="364.1">
                                        <om:Property Name="PortName" Value="EmailFailurePort" />
                                        <om:Property Name="MessageName" Value="FaultMessage" />
                                        <om:Property Name="OperationName" Value="Operation_1" />
                                        <om:Property Name="OperationMessageName" Value="Request" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="SendEmailFailure" />
                                        <om:Property Name="Signal" Value="True" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="DecisionBranch" OID="17d3a5be-1c55-4e73-8113-866e7fd67b3c" ParentLink="ReallyComplexStatement_Branch">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Else" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="Decision" OID="f6efb955-cc0f-454a-abe2-928ca6b5e12b" ParentLink="Catch_Statement" LowerBound="365.1" HigherBound="450.1">
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="ChangeLoadStatusToFailed" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="DecisionBranch" OID="bf425f61-b94a-411c-a807-7bcdcdaee094" ParentLink="ReallyComplexStatement_Branch" LowerBound="366.33" HigherBound="450.1">
                                    <om:Property Name="Expression" Value="varSQLOk == 0 " />
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="UpdateStatus" />
                                    <om:Property Name="Signal" Value="True" />
                                    <om:Element Type="VariableAssignment" OID="f4fd7b4a-e302-4a1c-89fa-d7eebf604f37" ParentLink="ComplexStatement_Statement" LowerBound="368.1" HigherBound="391.1">
                                        <om:Property Name="Expression" Value="//sXpath = &quot;count(/*[local-name()='CartMigrationErrorResponses' and namespace-uri()='http://CartMigration.CartMigrationErrorBackupSchema']/*[local-name()='CartMigrationErrorResponse' and namespace-uri()='']/*[local-name()='CartMigrationErrorListing' and namespace-uri()='']&quot;;&#xD;&#xA;//nRecordCount = System.Convert.ToInt32(xpath(MessageReplyCommerceBackup,sXpath)); &#xD;&#xA;//xDoc = new System.Xml.XmlDocument(); &#xD;&#xA;&#xD;&#xA;//System.Diagnostics.EventLog.WriteEntry(&quot;CartMigration&quot;, &quot;Hello&quot;);&#xD;&#xA;nRecordCountBTLOL = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(/*[local-name()='CartMigrationRequestBackup' and namespace-uri()='http://CartMigration.CartMigrationRequestBackup']/*[local-name()='BasketList' and namespace-uri()='']/*[local-name()='BasketDetails' and namespace-uri()='']/*[local-name()='LegacySourceSystem' and namespace-uri()=''][.='BTLOL'])&quot;));&#xD;&#xA;//nRecordCountBTLOL = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(//LegacySourceSystem][.='BTLOL'])&quot;));&#xD;&#xA;&#xD;&#xA;//nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(//LegacySourceSystem&gt;TS3)&quot;));&#xD;&#xA;nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(/*[local-name()='CartMigrationRequestBackup' and namespace-uri()='http://CartMigration.CartMigrationRequestBackup']/*[local-name()='BasketList' and namespace-uri()='']/*[local-name()='BasketDetails' and namespace-uri()='']/*[local-name()='LegacySourceSystem' and namespace-uri()=''][.='TS3'])&quot;));&#xD;&#xA;//nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(//LegacySourceSystem][.='TS3'])&quot;));&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;if (sErrorMessage.Length &gt; 100)&#xD;&#xA;{&#xD;&#xA;sErrorMessageSQL = sErrorMessage.Substring(0,100); &#xD;&#xA;}&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="GetRecordCount" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                    <om:Element Type="Decision" OID="c754fbf1-2bd1-4443-85f1-c07b79754537" ParentLink="ComplexStatement_Statement" LowerBound="391.1" HigherBound="420.1">
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Decide_TS3" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="DecisionBranch" OID="8ba2f705-ad65-41d3-9c1e-cb7db34ed292" ParentLink="ReallyComplexStatement_Branch" LowerBound="392.37" HigherBound="420.1">
                                            <om:Property Name="Expression" Value="nRecordCountTS3 &gt; 0" />
                                            <om:Property Name="IsGhostBranch" Value="True" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="WhenTS3RecordsExist" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="Construct" OID="f5fd088a-f867-4913-a2d9-7269be367ea2" ParentLink="ComplexStatement_Statement" LowerBound="394.1" HigherBound="402.1">
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Con_TS3ErrorMessage" />
                                                <om:Property Name="Signal" Value="True" />
                                                <om:Element Type="Transform" OID="92d8cad1-4f81-4738-80b7-0213aac826fb" ParentLink="ComplexStatement_Statement" LowerBound="397.1" HigherBound="399.1">
                                                    <om:Property Name="ClassName" Value="CartMigration.TransformCSRequestToTS3SQL" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="Transform_1" />
                                                    <om:Property Name="Signal" Value="False" />
                                                    <om:Element Type="MessagePartRef" OID="f4a53700-7f81-4f3f-aa28-f1066ea647ec" ParentLink="Transform_OutputMessagePartRef" LowerBound="398.56" HigherBound="398.80">
                                                        <om:Property Name="MessageRef" Value="MessageSingleInputMapped" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_10" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                    <om:Element Type="MessagePartRef" OID="c2202384-1431-4e98-b0ef-4aed5e2c924c" ParentLink="Transform_InputMessagePartRef" LowerBound="398.126" HigherBound="398.154">
                                                        <om:Property Name="MessageRef" Value="MessageRequestCommerceBackup" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_9" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                </om:Element>
                                                <om:Element Type="MessageAssignment" OID="c425f4fb-c628-4077-865d-836caf5e53a0" ParentLink="ComplexStatement_Statement" LowerBound="399.1" HigherBound="401.1">
                                                    <om:Property Name="Expression" Value="MessageSingleInputMapped.pstrErrorMessage =sErrorMessage;&#xD;&#xA;" />
                                                    <om:Property Name="ReportToAnalyst" Value="False" />
                                                    <om:Property Name="Name" Value="Assign Error Message" />
                                                    <om:Property Name="Signal" Value="True" />
                                                </om:Element>
                                                <om:Element Type="MessageRef" OID="5a501e70-e49f-4dd4-82a4-3ea3eac6bd4d" ParentLink="Construct_MessageRef" LowerBound="395.51" HigherBound="395.75">
                                                    <om:Property Name="Ref" Value="MessageSingleInputMapped" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                            <om:Element Type="Decision" OID="ec3b4784-0563-4a15-8952-d813747f4119" ParentLink="ComplexStatement_Statement" LowerBound="402.1" HigherBound="415.1">
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Decide_ArchiveMsgToSQL" />
                                                <om:Property Name="Signal" Value="True" />
                                                <om:Element Type="DecisionBranch" OID="da805b92-b7c7-46a9-82e7-3e4e0deb37f3" ParentLink="ReallyComplexStatement_Branch" LowerBound="403.41" HigherBound="415.1">
                                                    <om:Property Name="Expression" Value="varIsArchive_MessageToSQL == true" />
                                                    <om:Property Name="IsGhostBranch" Value="True" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="ArchiveMsgToSQL?" />
                                                    <om:Property Name="Signal" Value="False" />
                                                    <om:Element Type="Construct" OID="d60a269e-fe2d-4f64-adaf-5a34f0e5089d" ParentLink="ComplexStatement_Statement" LowerBound="405.1" HigherBound="412.1">
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="ConstructArchiveMessageCartsFrCommerceReply" />
                                                        <om:Property Name="Signal" Value="True" />
                                                        <om:Element Type="MessageRef" OID="57a72845-14ac-4b67-b13d-251e7f1dabc2" ParentLink="Construct_MessageRef" LowerBound="406.55" HigherBound="406.81">
                                                            <om:Property Name="Ref" Value="ArchiveMessageToSQLRequest" />
                                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                                            <om:Property Name="Signal" Value="False" />
                                                        </om:Element>
                                                        <om:Element Type="MessageAssignment" OID="cf68be27-7e28-4716-9697-87cc1cd62340" ParentLink="ComplexStatement_Statement" LowerBound="408.1" HigherBound="411.1">
                                                            <om:Property Name="Expression" Value="ArchiveMessageToSQLRequest = MessageSingleInputMapped; &#xD;&#xA;ArchiveMessageToSQLRequest(FILE.ReceivedFileName)=&quot;MessageCartsToSQLRequest&quot;; " />
                                                            <om:Property Name="ReportToAnalyst" Value="False" />
                                                            <om:Property Name="Name" Value="MessageAssignment_1" />
                                                            <om:Property Name="Signal" Value="True" />
                                                        </om:Element>
                                                    </om:Element>
                                                    <om:Element Type="Send" OID="41da3904-c468-4bd6-8e3e-dc51004f7a75" ParentLink="ComplexStatement_Statement" LowerBound="412.1" HigherBound="414.1">
                                                        <om:Property Name="PortName" Value="ArchivePort_MessageToSQLRequest" />
                                                        <om:Property Name="MessageName" Value="ArchiveMessageToSQLRequest" />
                                                        <om:Property Name="OperationName" Value="Operation_1" />
                                                        <om:Property Name="OperationMessageName" Value="Request" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="Send_2_ArchivePort_CartFailuresSQLReply" />
                                                        <om:Property Name="Signal" Value="True" />
                                                    </om:Element>
                                                </om:Element>
                                                <om:Element Type="DecisionBranch" OID="5e68d546-19d4-4e0b-84b2-2465014a567f" ParentLink="ReallyComplexStatement_Branch">
                                                    <om:Property Name="IsGhostBranch" Value="True" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="Else" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                            <om:Element Type="Send" OID="50ace482-0e3d-4aa5-be28-92d3a233c882" ParentLink="ComplexStatement_Statement" LowerBound="415.1" HigherBound="417.1">
                                                <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                                <om:Property Name="MessageName" Value="MessageSingleInputMapped" />
                                                <om:Property Name="OperationName" Value="procSetBasketError" />
                                                <om:Property Name="OperationMessageName" Value="Request" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="SendToSQLTS3" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="Receive" OID="d3ad5aea-8f00-4467-965d-da6ef1d3f994" ParentLink="ComplexStatement_Statement" LowerBound="417.1" HigherBound="419.1">
                                                <om:Property Name="Activate" Value="False" />
                                                <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                                <om:Property Name="MessageName" Value="MessageCartsFromSQLErrorUpdateResponse" />
                                                <om:Property Name="OperationName" Value="procSetBasketError" />
                                                <om:Property Name="OperationMessageName" Value="Response" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="ReceiveCartFailuresSQLReplyTS3" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="DecisionBranch" OID="6e1f3bfe-3642-43bc-8f49-b4759dac0958" ParentLink="ReallyComplexStatement_Branch">
                                            <om:Property Name="IsGhostBranch" Value="True" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="Else" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="Decision" OID="92de5004-c39d-4cf6-92b0-aa4bf488c170" ParentLink="ComplexStatement_Statement" LowerBound="420.1" HigherBound="449.1">
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Decide_BTLOL" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="DecisionBranch" OID="8636ca16-69a2-4609-be41-0ad11743f455" ParentLink="ReallyComplexStatement_Branch" LowerBound="421.37" HigherBound="449.1">
                                            <om:Property Name="Expression" Value="nRecordCountBTLOL &gt; 0 " />
                                            <om:Property Name="IsGhostBranch" Value="True" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="WhenBTLOLRecordsExist" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="Construct" OID="e4438cac-e1ae-4f88-8a23-33c9604b81f0" ParentLink="ComplexStatement_Statement" LowerBound="423.1" HigherBound="431.1">
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Con_BTLOLErrorMessage" />
                                                <om:Property Name="Signal" Value="True" />
                                                <om:Element Type="Transform" OID="3c674bb3-72ec-4b88-937e-f9428c63c95f" ParentLink="ComplexStatement_Statement" LowerBound="426.1" HigherBound="428.1">
                                                    <om:Property Name="ClassName" Value="CartMigration.TransformCSRequestToBTLOLSQL" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="Transform_3" />
                                                    <om:Property Name="Signal" Value="True" />
                                                    <om:Element Type="MessagePartRef" OID="76fef450-e464-4eb7-bcd9-f2b1b150cda6" ParentLink="Transform_OutputMessagePartRef" LowerBound="427.56" HigherBound="427.80">
                                                        <om:Property Name="MessageRef" Value="MessageSingleInputMapped" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_18" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                    <om:Element Type="MessagePartRef" OID="359a2913-9595-4c34-addf-d12a46032521" ParentLink="Transform_InputMessagePartRef" LowerBound="427.128" HigherBound="427.156">
                                                        <om:Property Name="MessageRef" Value="MessageRequestCommerceBackup" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="MessagePartReference_17" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                </om:Element>
                                                <om:Element Type="MessageAssignment" OID="6f711859-3b85-4b5f-b837-251aa4eed568" ParentLink="ComplexStatement_Statement" LowerBound="428.1" HigherBound="430.1">
                                                    <om:Property Name="Expression" Value="MessageSingleInputMapped.pstrErrorMessage =sErrorMessage;&#xD;&#xA;" />
                                                    <om:Property Name="ReportToAnalyst" Value="False" />
                                                    <om:Property Name="Name" Value="Assign Error Message" />
                                                    <om:Property Name="Signal" Value="True" />
                                                </om:Element>
                                                <om:Element Type="MessageRef" OID="6fd7278a-6a8f-4a08-9aee-a7a353c9645b" ParentLink="Construct_MessageRef" LowerBound="424.51" HigherBound="424.75">
                                                    <om:Property Name="Ref" Value="MessageSingleInputMapped" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                            <om:Element Type="Decision" OID="3eb04fb2-bd1f-408d-a31d-cff4b6daff2a" ParentLink="ComplexStatement_Statement" LowerBound="431.1" HigherBound="444.1">
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Decide_ArchiveMsgToSQL" />
                                                <om:Property Name="Signal" Value="True" />
                                                <om:Element Type="DecisionBranch" OID="4b085686-1299-4f10-aa15-3531114c23d1" ParentLink="ReallyComplexStatement_Branch" LowerBound="432.41" HigherBound="444.1">
                                                    <om:Property Name="Expression" Value="varIsArchive_MessageToSQL == true" />
                                                    <om:Property Name="IsGhostBranch" Value="True" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="ArchiveMsgToSQL?" />
                                                    <om:Property Name="Signal" Value="False" />
                                                    <om:Element Type="Construct" OID="9eb68f74-af1b-4876-beeb-ee44b7715200" ParentLink="ComplexStatement_Statement" LowerBound="434.1" HigherBound="441.1">
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="ConstructArchiveMessageCartsFrCommerceReply" />
                                                        <om:Property Name="Signal" Value="True" />
                                                        <om:Element Type="MessageRef" OID="1146c55c-0ac7-4a8c-8bde-94eb3adeb70c" ParentLink="Construct_MessageRef" LowerBound="435.55" HigherBound="435.81">
                                                            <om:Property Name="Ref" Value="ArchiveMessageToSQLRequest" />
                                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                                            <om:Property Name="Signal" Value="False" />
                                                        </om:Element>
                                                        <om:Element Type="MessageAssignment" OID="90cbed76-308b-40a5-bda5-5423826a1352" ParentLink="ComplexStatement_Statement" LowerBound="437.1" HigherBound="440.1">
                                                            <om:Property Name="Expression" Value="ArchiveMessageToSQLRequest = MessageSingleInputMapped; &#xD;&#xA;ArchiveMessageToSQLRequest(FILE.ReceivedFileName)=&quot;MessageCartsToSQLRequest&quot;; " />
                                                            <om:Property Name="ReportToAnalyst" Value="False" />
                                                            <om:Property Name="Name" Value="MessageAssignment_1" />
                                                            <om:Property Name="Signal" Value="True" />
                                                        </om:Element>
                                                    </om:Element>
                                                    <om:Element Type="Send" OID="feb060a7-484a-4e86-9298-ccf5bab07a6c" ParentLink="ComplexStatement_Statement" LowerBound="441.1" HigherBound="443.1">
                                                        <om:Property Name="PortName" Value="ArchivePort_MessageToSQLRequest" />
                                                        <om:Property Name="MessageName" Value="ArchiveMessageToSQLRequest" />
                                                        <om:Property Name="OperationName" Value="Operation_1" />
                                                        <om:Property Name="OperationMessageName" Value="Request" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Name" Value="Send_2_ArchivePort_CartFailuresSQLReply" />
                                                        <om:Property Name="Signal" Value="True" />
                                                    </om:Element>
                                                </om:Element>
                                                <om:Element Type="DecisionBranch" OID="7865d14a-ee51-456f-ba55-3880a2ae30ef" ParentLink="ReallyComplexStatement_Branch">
                                                    <om:Property Name="IsGhostBranch" Value="True" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="Else" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                            <om:Element Type="Send" OID="5c51a4b6-262c-459b-b43b-4276ce316d7b" ParentLink="ComplexStatement_Statement" LowerBound="444.1" HigherBound="446.1">
                                                <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                                <om:Property Name="MessageName" Value="MessageSingleInputMapped" />
                                                <om:Property Name="OperationName" Value="procSetBasketError" />
                                                <om:Property Name="OperationMessageName" Value="Request" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="SendToSQLBTLOL" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                            <om:Element Type="Receive" OID="dc3b9981-d8d8-43e5-8600-a8ae86dbb52b" ParentLink="ComplexStatement_Statement" LowerBound="446.1" HigherBound="448.1">
                                                <om:Property Name="Activate" Value="False" />
                                                <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                                <om:Property Name="MessageName" Value="MessageCartsFromSQLErrorUpdateResponse" />
                                                <om:Property Name="OperationName" Value="procSetBasketError" />
                                                <om:Property Name="OperationMessageName" Value="Response" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="ReceiveCartFailuresSQLReplyBTLOL" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="DecisionBranch" OID="629f0b0f-aa66-403d-a246-321ad483fdb0" ParentLink="ReallyComplexStatement_Branch">
                                            <om:Property Name="IsGhostBranch" Value="True" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="Else" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="DecisionBranch" OID="07222d4d-5307-412b-8d82-68755c62dcf1" ParentLink="ReallyComplexStatement_Branch">
                                    <om:Property Name="IsGhostBranch" Value="True" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Else" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="Terminate" OID="8209bd67-3d33-4c41-a0e8-50fc7d25dd4a" ParentLink="Catch_Statement" LowerBound="450.1" HigherBound="452.1">
                                <om:Property Name="ErrorMessage" Value="&quot;Process terminated due to exception encountered when transmitting file to Commerce Server&quot;;" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Terminate_1" />
                                <om:Property Name="Signal" Value="True" />
                            </om:Element>
                        </om:Element>
                    </om:Element>
                    <om:Element Type="VariableAssignment" OID="7a844259-681a-47e8-a82a-98210c63d908" ParentLink="ComplexStatement_Statement" LowerBound="455.1" HigherBound="463.1">
                        <om:Property Name="Expression" Value="//sXpath = &quot;count(/*[local-name()='CartMigrationErrorResponses' and namespace-uri()='http://CartMigration.CartMigrationErrorBackupSchema']/*[local-name()='CartMigrationErrorResponse' and namespace-uri()='']/*[local-name()='CartMigrationErrorListing' and namespace-uri()='']&quot;;&#xD;&#xA;//nRecordCount = System.Convert.ToInt32(xpath(MessageReplyCommerceBackup,sXpath)); &#xD;&#xA;//xDoc = new System.Xml.XmlDocument(); &#xD;&#xA;&#xD;&#xA;//System.Diagnostics.EventLog.WriteEntry(&quot;CartMigration&quot;, &quot;Hello&quot;);&#xD;&#xA;nRecordCount = System.Convert.ToInt32(xpath(MessageReplyCommerceBackup, &quot;count(//CartMigrationErrorListing)&quot;));&#xD;&#xA;&#xD;&#xA;" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="GetRecordCount" />
                        <om:Property Name="Signal" Value="False" />
                    </om:Element>
                    <om:Element Type="While" OID="cb39cf21-0c74-4ba2-b657-b724ed45fb78" ParentLink="ComplexStatement_Statement" LowerBound="463.1" HigherBound="522.1">
                        <om:Property Name="Expression" Value="nLoopCount &lt;= nRecordCount" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="Loop_1" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Construct" OID="8ae5b4f7-49ab-4705-9251-a95b4c5f480b" ParentLink="ComplexStatement_Statement" LowerBound="466.1" HigherBound="480.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ConstructMessage_1" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="MessageRef" OID="e566d9f4-63b1-4902-a19c-91ea6f518198" ParentLink="Construct_MessageRef" LowerBound="467.35" HigherBound="467.53">
                                <om:Property Name="Ref" Value="MessageSingleInput" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="MessageAssignment" OID="696a19e3-aba1-4248-9d90-30cc7cf5e209" ParentLink="ComplexStatement_Statement" LowerBound="469.1" HigherBound="479.1">
                                <om:Property Name="Expression" Value="//MessageSingleInputX.LoadXml(@&quot;&lt;ns0:CartMigrationErrorResponses xmlns:ns0=&quot;&quot;http://CartMigration.CartMigrationErrorBackupSchema&quot;&quot;&gt;&lt;CartMigrationErrorResponse&gt;&lt;CartMigrationErrorListing&gt;&lt;ErrorMessage&gt;&lt;/ErrorMessage&gt;&lt;BasketID&gt;&lt;/BasketID&lt;SourceSystem&gt;&lt;/SourceSystem&gt;&lt;Status&gt;&lt;/Status&gt;&lt;/CartMigrationErrorListing&gt;&lt;/CartMigrationErrorResponse&gt;&lt;/ns0:CartMigrationErrorResponses&gt;&quot;);&#xD;&#xA;//MessageSingleInputX = xDoctemp; &#xD;&#xA;//MessageSingleInputX = xDoc; &#xD;&#xA;//MessageSingleInputX(XMLNORM.AllowUnrecognizedMessage) = true; &#xD;&#xA;sXpath = System.String.Format(&quot;//CartMigrationErrorListing[{0}]&quot;,nLoopCount);&#xD;&#xA;MessageSingleInput = xpath(MessageReplyCommerceBackup,sXpath); &#xD;&#xA;&#xD;&#xA;//sStatus = xpath(MessageReplyCommerceBackup,&quot;string(//Status)&quot;); &#xD;&#xA;sStatus = xpath(MessageSingleInput,&quot;string(//Status)&quot;);&#xD;&#xA;" />
                                <om:Property Name="ReportToAnalyst" Value="False" />
                                <om:Property Name="Name" Value="MessageAssignment_2" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Decision" OID="b964a3ef-9f5f-4710-b28d-f3b3deb5e86d" ParentLink="ComplexStatement_Statement" LowerBound="480.1" HigherBound="519.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Decide_Status_Failed" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="DecisionBranch" OID="1e831a21-0105-4a8a-b464-101a4a867efe" ParentLink="ReallyComplexStatement_Branch" LowerBound="481.25" HigherBound="519.1">
                                <om:Property Name="Expression" Value="sStatus == &quot;Failed&quot;&#xD;&#xA;" />
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="RuleForFailedMessages" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="Construct" OID="7d2dc7f6-4b07-443e-8ed2-811cea3171f0" ParentLink="ComplexStatement_Statement" LowerBound="483.1" HigherBound="489.1">
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="ConstructMessageSingleInputMapped" />
                                    <om:Property Name="Signal" Value="True" />
                                    <om:Element Type="MessageRef" OID="02563f57-7f36-491d-bee4-702a0b2df137" ParentLink="Construct_MessageRef" LowerBound="484.39" HigherBound="484.63">
                                        <om:Property Name="Ref" Value="MessageSingleInputMapped" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                    <om:Element Type="Transform" OID="8241981c-74ab-4730-8e88-1e99442c00dc" ParentLink="ComplexStatement_Statement" LowerBound="486.1" HigherBound="488.1">
                                        <om:Property Name="ClassName" Value="CartMigration.Transform_2" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Transform_SingleInput_SingleMapped" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="MessagePartRef" OID="bbb72245-c2ea-4064-9935-ba0e7f7e5842" ParentLink="Transform_InputMessagePartRef" LowerBound="487.99" HigherBound="487.117">
                                            <om:Property Name="MessageRef" Value="MessageSingleInput" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="MessagePartReference_5" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                        <om:Element Type="MessagePartRef" OID="fc39c7f2-543a-4fc6-addc-720c9bbf2a6c" ParentLink="Transform_OutputMessagePartRef" LowerBound="487.44" HigherBound="487.68">
                                            <om:Property Name="MessageRef" Value="MessageSingleInputMapped" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="MessagePartReference_6" />
                                            <om:Property Name="Signal" Value="False" />
                                        </om:Element>
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="Send" OID="cfa3945a-b8a3-44ed-9768-f7392e0fbfed" ParentLink="ComplexStatement_Statement" LowerBound="489.1" HigherBound="491.1">
                                    <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                    <om:Property Name="MessageName" Value="MessageSingleInputMapped" />
                                    <om:Property Name="OperationName" Value="procSetBasketError" />
                                    <om:Property Name="OperationMessageName" Value="Request" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="SendCartFailuresSQLReply" />
                                    <om:Property Name="Signal" Value="True" />
                                </om:Element>
                                <om:Element Type="Receive" OID="66d88532-fb9c-408b-86a3-302774478d7c" ParentLink="ComplexStatement_Statement" LowerBound="491.1" HigherBound="493.1">
                                    <om:Property Name="Activate" Value="False" />
                                    <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                    <om:Property Name="MessageName" Value="MessageCartsFromSQLErrorUpdateResponse" />
                                    <om:Property Name="OperationName" Value="procSetBasketError" />
                                    <om:Property Name="OperationMessageName" Value="Response" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="ReceiveCartFailuresSQLReply" />
                                    <om:Property Name="Signal" Value="True" />
                                </om:Element>
                                <om:Element Type="Decision" OID="bdd04a10-7d44-42cf-8d4c-782a9abec283" ParentLink="ComplexStatement_Statement" LowerBound="493.1" HigherBound="506.1">
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Decide_ArchiveMsgToSQL" />
                                    <om:Property Name="Signal" Value="True" />
                                    <om:Element Type="DecisionBranch" OID="1598cd20-69a0-4177-b10e-6d04c3d5f445" ParentLink="ReallyComplexStatement_Branch" LowerBound="494.29" HigherBound="506.1">
                                        <om:Property Name="Expression" Value="varIsArchive_MessageToSQL == true" />
                                        <om:Property Name="IsGhostBranch" Value="True" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="ArchiveMsgToSQL?" />
                                        <om:Property Name="Signal" Value="False" />
                                        <om:Element Type="Construct" OID="bbb18503-18f4-42c9-9944-d8290b4e222e" ParentLink="ComplexStatement_Statement" LowerBound="496.1" HigherBound="503.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ConstructArchiveMessageCartsFrCommerceReply" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessageRef" OID="08213ae5-4980-4531-9c89-6e4ed290d418" ParentLink="Construct_MessageRef" LowerBound="497.43" HigherBound="497.69">
                                                <om:Property Name="Ref" Value="ArchiveMessageToSQLRequest" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="MessageAssignment" OID="74549720-3bca-4a89-8c7a-0d4b0d78733e" ParentLink="ComplexStatement_Statement" LowerBound="499.1" HigherBound="502.1">
                                                <om:Property Name="Expression" Value="ArchiveMessageToSQLRequest = MessageSingleInputMapped; &#xD;&#xA;ArchiveMessageToSQLRequest(FILE.ReceivedFileName)=&quot;MessageCartsToSQLRequest&quot;; " />
                                                <om:Property Name="ReportToAnalyst" Value="False" />
                                                <om:Property Name="Name" Value="MessageAssignment_1" />
                                                <om:Property Name="Signal" Value="True" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="Send" OID="d76b13ec-076e-4ead-98fa-c897bee4d78c" ParentLink="ComplexStatement_Statement" LowerBound="503.1" HigherBound="505.1">
                                            <om:Property Name="PortName" Value="ArchivePort_MessageToSQLRequest" />
                                            <om:Property Name="MessageName" Value="ArchiveMessageToSQLRequest" />
                                            <om:Property Name="OperationName" Value="Operation_1" />
                                            <om:Property Name="OperationMessageName" Value="Request" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="Send_2_ArchivePort_CartFailuresSQLReply" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="DecisionBranch" OID="0668e3fc-462c-48fb-9ff1-b18a28a4c297" ParentLink="ReallyComplexStatement_Branch">
                                        <om:Property Name="IsGhostBranch" Value="True" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Else" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="Decision" OID="2ed362fd-2b90-4926-969a-d24202cfb60e" ParentLink="ComplexStatement_Statement" LowerBound="506.1" HigherBound="518.1">
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Decide_EmailForSQLFailuresFromCommerce" />
                                    <om:Property Name="Signal" Value="True" />
                                    <om:Element Type="DecisionBranch" OID="d874518d-68b5-4888-8ac5-bd714e3dbc98" ParentLink="ReallyComplexStatement_Branch" LowerBound="507.29" HigherBound="518.1">
                                        <om:Property Name="Expression" Value="varIsEmailForSQLFailuresFromCommerce==true" />
                                        <om:Property Name="IsGhostBranch" Value="True" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="EmailForSQLFailuresFromCommerce?" />
                                        <om:Property Name="Signal" Value="False" />
                                        <om:Element Type="Construct" OID="3c90f07f-0ea8-4d19-a80a-1a003c82395f" ParentLink="ComplexStatement_Statement" LowerBound="509.1" HigherBound="515.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ConstructMessage_EmailFailuresToCS" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="Transform" OID="b20e79d2-006d-4aad-981a-45d472b2b709" ParentLink="ComplexStatement_Statement" LowerBound="512.1" HigherBound="514.1">
                                                <om:Property Name="ClassName" Value="CartMigration.Transform_EmailFailuresToCS" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Transform_EmailFailuresToCS" />
                                                <om:Property Name="Signal" Value="False" />
                                                <om:Element Type="MessagePartRef" OID="f0587be0-0d58-45e9-88ab-6265f2dae04c" ParentLink="Transform_InputMessagePartRef" LowerBound="513.118" HigherBound="513.136">
                                                    <om:Property Name="MessageRef" Value="MessageSingleInput" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="MessagePartReference_7" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                                <om:Element Type="MessagePartRef" OID="b5666dea-c9ea-405d-8500-56a383e480ac" ParentLink="Transform_OutputMessagePartRef" LowerBound="513.48" HigherBound="513.71">
                                                    <om:Property Name="MessageRef" Value="MessageSingleInputEmail" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="MessagePartReference_8" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                            <om:Element Type="MessageRef" OID="76534115-0b52-4e66-8ae1-4edf008381b6" ParentLink="Construct_MessageRef" LowerBound="510.43" HigherBound="510.66">
                                                <om:Property Name="Ref" Value="MessageSingleInputEmail" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="Send" OID="104fb3ca-64ff-4d16-be71-91972ae38560" ParentLink="ComplexStatement_Statement" LowerBound="515.1" HigherBound="517.1">
                                            <om:Property Name="PortName" Value="EmailSQLFailuresFromCommcerce" />
                                            <om:Property Name="MessageName" Value="MessageSingleInputEmail" />
                                            <om:Property Name="OperationName" Value="Operation_1" />
                                            <om:Property Name="OperationMessageName" Value="Request" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="SendEmailSQLFailuresFromCommerce" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="DecisionBranch" OID="54446474-4a56-4c26-a15e-71a8ea4de108" ParentLink="ReallyComplexStatement_Branch">
                                        <om:Property Name="IsGhostBranch" Value="True" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Else" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                            </om:Element>
                            <om:Element Type="DecisionBranch" OID="c08d3283-12dc-4392-bd55-f9f158e08b86" ParentLink="ReallyComplexStatement_Branch">
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Else" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="VariableAssignment" OID="f1c770bc-d34d-4608-b7c2-ffad1b4fcee2" ParentLink="ComplexStatement_Statement" LowerBound="519.1" HigherBound="521.1">
                            <om:Property Name="Expression" Value="nLoopCount = nLoopCount + 1; " />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="AddToCounter" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                    </om:Element>
                    <om:Element Type="Catch" OID="1a3faf54-5371-48d6-930b-2ed3f1293881" ParentLink="Scope_Catch" LowerBound="525.1" HigherBound="627.1">
                        <om:Property Name="ExceptionName" Value="ex" />
                        <om:Property Name="ExceptionType" Value="System.SystemException" />
                        <om:Property Name="IsFaultMessage" Value="False" />
                        <om:Property Name="ReportToAnalyst" Value="True" />
                        <om:Property Name="Name" Value="CatchException_1" />
                        <om:Property Name="Signal" Value="True" />
                        <om:Element Type="Construct" OID="4109d679-0003-4318-9ab5-53e5add2b928" ParentLink="Catch_Statement" LowerBound="528.1" HigherBound="545.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ConstructFaultMessage" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="MessageRef" OID="4d0e9652-05e7-4f70-bde7-bb3162e57f9b" ParentLink="Construct_MessageRef" LowerBound="529.35" HigherBound="529.47">
                                <om:Property Name="Ref" Value="FaultMessage" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                            <om:Element Type="MessageAssignment" OID="fd4861a4-44cc-4d8f-95a3-5c30d0d932f3" ParentLink="ComplexStatement_Statement" LowerBound="531.1" HigherBound="544.1">
                                <om:Property Name="Expression" Value="// Create fault exception Message&#xD;&#xA;FaultMessage= Microsoft.Practices.ESB.ExceptionHandling.ExceptionMgmt.CreateFaultMessage();&#xD;&#xA;&#xD;&#xA;// Assign Properties&#xD;&#xA;FaultMessage.FailureCategory=&quot;CartMigration Exception&quot;;&#xD;&#xA;FaultMessage.FaultDescription=ex.Message;&#xD;&#xA;FaultMessage.FaultCode=&quot;3001&quot;;&#xD;&#xA;FaultMessage.FaultSeverity= Microsoft.Practices.ESB.ExceptionHandling.FaultSeverity.Severe;&#xD;&#xA;//Microsoft.Practices.ESB.ExceptionHandling.ExceptionMgmt.AddMessage(FaultMessage,OrgDetailsLegacy);&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;&#xD;&#xA;" />
                                <om:Property Name="ReportToAnalyst" Value="False" />
                                <om:Property Name="Name" Value="MessageAssignment_3" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Send" OID="ed5e3250-1578-4d17-ba2b-a3eff3eee298" ParentLink="Catch_Statement" LowerBound="545.1" HigherBound="547.1">
                            <om:Property Name="PortName" Value="FaultPort" />
                            <om:Property Name="MessageName" Value="FaultMessage" />
                            <om:Property Name="OperationName" Value="Operation_1" />
                            <om:Property Name="OperationMessageName" Value="Request" />
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="SendFaultMessage" />
                            <om:Property Name="Signal" Value="True" />
                        </om:Element>
                        <om:Element Type="Decision" OID="c2d15ea7-06c5-40e4-9bd7-aef9fea40ca5" ParentLink="Catch_Statement" LowerBound="547.1" HigherBound="555.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="Decide_EmailForTesting" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="DecisionBranch" OID="0c2c3fc5-66bb-4c6e-b771-c43a935cbb99" ParentLink="ReallyComplexStatement_Branch" LowerBound="548.25" HigherBound="555.1">
                                <om:Property Name="Expression" Value="varIsEmailForTesting == true" />
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="EmailForTesting?" />
                                <om:Property Name="Signal" Value="False" />
                                <om:Element Type="Send" OID="4d3905c3-4ac2-4799-a9da-263c0161b4bc" ParentLink="ComplexStatement_Statement" LowerBound="550.1" HigherBound="552.1">
                                    <om:Property Name="PortName" Value="EmailFailurePort" />
                                    <om:Property Name="MessageName" Value="FaultMessage" />
                                    <om:Property Name="OperationName" Value="Operation_1" />
                                    <om:Property Name="OperationMessageName" Value="Request" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="SendEmailFailure" />
                                    <om:Property Name="Signal" Value="True" />
                                </om:Element>
                                <om:Element Type="VariableAssignment" OID="3505d3dc-f209-46cc-9cdf-8f746078869d" ParentLink="ComplexStatement_Statement" LowerBound="552.1" HigherBound="554.1">
                                    <om:Property Name="Expression" Value="System.Diagnostics.EventLog.WriteEntry(&quot;CartMigration-1&quot;,sErrorMessage );" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Expression_1" />
                                    <om:Property Name="Signal" Value="False" />
                                </om:Element>
                            </om:Element>
                            <om:Element Type="DecisionBranch" OID="b285d957-7201-4832-8d26-c98d056a0cc9" ParentLink="ReallyComplexStatement_Branch">
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Else" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                        <om:Element Type="Decision" OID="b9807fc0-5d95-4bc1-80bc-636d8d0f3c1a" ParentLink="Catch_Statement" LowerBound="555.1" HigherBound="626.1">
                            <om:Property Name="ReportToAnalyst" Value="True" />
                            <om:Property Name="Name" Value="ChangeLoadStatusToFailed" />
                            <om:Property Name="Signal" Value="True" />
                            <om:Element Type="DecisionBranch" OID="e0033632-e5e6-4807-b9ac-64ac998ad82a" ParentLink="ReallyComplexStatement_Branch" LowerBound="556.25" HigherBound="626.1">
                                <om:Property Name="Expression" Value="varSQLOk == 0 " />
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="UpdateStatus" />
                                <om:Property Name="Signal" Value="True" />
                                <om:Element Type="VariableAssignment" OID="58de61e8-13ea-44de-8766-2378e0100315" ParentLink="ComplexStatement_Statement" LowerBound="558.1" HigherBound="571.1">
                                    <om:Property Name="Expression" Value="//sXpath = &quot;count(/*[local-name()='CartMigrationErrorResponses' and namespace-uri()='http://CartMigration.CartMigrationErrorBackupSchema']/*[local-name()='CartMigrationErrorResponse' and namespace-uri()='']/*[local-name()='CartMigrationErrorListing' and namespace-uri()='']&quot;;&#xD;&#xA;//nRecordCount = System.Convert.ToInt32(xpath(MessageReplyCommerceBackup,sXpath)); &#xD;&#xA;//xDoc = new System.Xml.XmlDocument(); &#xD;&#xA;&#xD;&#xA;//System.Diagnostics.EventLog.WriteEntry(&quot;CartMigration&quot;, &quot;Hello&quot;);&#xD;&#xA;nRecordCountBTLOL = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(/*[local-name()='CartMigrationRequestBackup' and namespace-uri()='http://CartMigration.CartMigrationRequestBackup']/*[local-name()='BasketList' and namespace-uri()='']/*[local-name()='BasketDetails' and namespace-uri()='']/*[local-name()='LegacySourceSystem' and namespace-uri()=''][.='BTLOL'])&quot;));&#xD;&#xA;//nRecordCountBTLOL = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(//LegacySourceSystem][.='BTLOL'])&quot;));&#xD;&#xA;&#xD;&#xA;//nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(//LegacySourceSystem&gt;TS3)&quot;));&#xD;&#xA;nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(/*[local-name()='CartMigrationRequestBackup' and namespace-uri()='http://CartMigration.CartMigrationRequestBackup']/*[local-name()='BasketList' and namespace-uri()='']/*[local-name()='BasketDetails' and namespace-uri()='']/*[local-name()='LegacySourceSystem' and namespace-uri()=''][.='TS3'])&quot;));&#xD;&#xA;//nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, &quot;count(//LegacySourceSystem][.='TS3'])&quot;));&#xD;&#xA;&#xD;&#xA;" />
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="GetRecordCount" />
                                    <om:Property Name="Signal" Value="True" />
                                </om:Element>
                                <om:Element Type="Decision" OID="bc82c78e-885c-4a51-b358-1334407b8b9c" ParentLink="ComplexStatement_Statement" LowerBound="571.1" HigherBound="598.1">
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Decide_TS3" />
                                    <om:Property Name="Signal" Value="True" />
                                    <om:Element Type="DecisionBranch" OID="54981e80-8386-4874-9038-651736702ccd" ParentLink="ReallyComplexStatement_Branch" LowerBound="572.29" HigherBound="598.1">
                                        <om:Property Name="Expression" Value="nRecordCountTS3 &gt; 0" />
                                        <om:Property Name="IsGhostBranch" Value="True" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="WhenTS3RecordsExist" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Construct" OID="1efea044-8e4b-48a8-997c-4c628cc62374" ParentLink="ComplexStatement_Statement" LowerBound="574.1" HigherBound="580.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="Con_TS3ErrorMessage" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessageRef" OID="e9e12a97-5429-42e1-84c0-a994fbb781e2" ParentLink="Construct_MessageRef" LowerBound="575.43" HigherBound="575.67">
                                                <om:Property Name="Ref" Value="MessageSingleInputMapped" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="Transform" OID="33d62cff-2e86-4d32-adc5-7302907e0846" ParentLink="ComplexStatement_Statement" LowerBound="577.1" HigherBound="579.1">
                                                <om:Property Name="ClassName" Value="CartMigration.TransformCSRequestToTS3SQL" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Transform_1" />
                                                <om:Property Name="Signal" Value="False" />
                                                <om:Element Type="MessagePartRef" OID="e7597cd5-4afe-4df3-a931-f2461ae74d8d" ParentLink="Transform_InputMessagePartRef" LowerBound="578.118" HigherBound="578.146">
                                                    <om:Property Name="MessageRef" Value="MessageRequestCommerceBackup" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="MessagePartReference_13" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                                <om:Element Type="MessagePartRef" OID="e8693244-0ff8-48d5-af75-abde7dc9ac45" ParentLink="Transform_OutputMessagePartRef" LowerBound="578.48" HigherBound="578.72">
                                                    <om:Property Name="MessageRef" Value="MessageSingleInputMapped" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="MessagePartReference_14" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="Send" OID="4ece1fa6-fe36-467f-9ad4-42a432722b8e" ParentLink="ComplexStatement_Statement" LowerBound="580.1" HigherBound="582.1">
                                            <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                            <om:Property Name="MessageName" Value="MessageSingleInputMapped" />
                                            <om:Property Name="OperationName" Value="procSetBasketError" />
                                            <om:Property Name="OperationMessageName" Value="Request" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="SendToSQLTS3" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                        <om:Element Type="Receive" OID="9103f290-48d5-44bd-a871-88663602f7e6" ParentLink="ComplexStatement_Statement" LowerBound="582.1" HigherBound="584.1">
                                            <om:Property Name="Activate" Value="False" />
                                            <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                            <om:Property Name="MessageName" Value="MessageCartsFromSQLErrorUpdateResponse" />
                                            <om:Property Name="OperationName" Value="procSetBasketError" />
                                            <om:Property Name="OperationMessageName" Value="Response" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ReceiveCartFailuresSQLReplyTS3" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                        <om:Element Type="Decision" OID="cf0c63d0-08d3-4905-a652-47373485d092" ParentLink="ComplexStatement_Statement" LowerBound="584.1" HigherBound="597.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="Decide_ArchiveMsgToSQL" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="DecisionBranch" OID="5cc203c6-127f-4e15-bec1-467baf77e2d4" ParentLink="ReallyComplexStatement_Branch" LowerBound="585.33" HigherBound="597.1">
                                                <om:Property Name="Expression" Value="varIsArchive_MessageToSQL == true" />
                                                <om:Property Name="IsGhostBranch" Value="True" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="ArchiveMsgToSQL?" />
                                                <om:Property Name="Signal" Value="False" />
                                                <om:Element Type="Construct" OID="a3a3b3a2-3a51-4911-86ba-15ca5fe5b41d" ParentLink="ComplexStatement_Statement" LowerBound="587.1" HigherBound="594.1">
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="ConstructArchiveMessageCartsFrCommerceReply" />
                                                    <om:Property Name="Signal" Value="True" />
                                                    <om:Element Type="MessageRef" OID="deca7ef7-f15f-4ba2-a5c9-47050b7d5c3f" ParentLink="Construct_MessageRef" LowerBound="588.47" HigherBound="588.73">
                                                        <om:Property Name="Ref" Value="ArchiveMessageToSQLRequest" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                    <om:Element Type="MessageAssignment" OID="c3609a85-8362-40a8-b1ee-de9e6d8cb8c6" ParentLink="ComplexStatement_Statement" LowerBound="590.1" HigherBound="593.1">
                                                        <om:Property Name="Expression" Value="ArchiveMessageToSQLRequest = MessageSingleInputMapped; &#xD;&#xA;ArchiveMessageToSQLRequest(FILE.ReceivedFileName)=&quot;MessageCartsToSQLRequest&quot;; " />
                                                        <om:Property Name="ReportToAnalyst" Value="False" />
                                                        <om:Property Name="Name" Value="MessageAssignment_1" />
                                                        <om:Property Name="Signal" Value="True" />
                                                    </om:Element>
                                                </om:Element>
                                                <om:Element Type="Send" OID="188aac85-7644-422a-b078-879748910d15" ParentLink="ComplexStatement_Statement" LowerBound="594.1" HigherBound="596.1">
                                                    <om:Property Name="PortName" Value="ArchivePort_MessageToSQLRequest" />
                                                    <om:Property Name="MessageName" Value="ArchiveMessageToSQLRequest" />
                                                    <om:Property Name="OperationName" Value="Operation_1" />
                                                    <om:Property Name="OperationMessageName" Value="Request" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="Send_2_ArchivePort_CartFailuresSQLReply" />
                                                    <om:Property Name="Signal" Value="True" />
                                                </om:Element>
                                            </om:Element>
                                            <om:Element Type="DecisionBranch" OID="31d9eaf6-da0c-4ccc-a370-e8c967faa230" ParentLink="ReallyComplexStatement_Branch">
                                                <om:Property Name="IsGhostBranch" Value="True" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Else" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="DecisionBranch" OID="52b80bb8-bf12-4d37-8cf4-13c278487d5a" ParentLink="ReallyComplexStatement_Branch">
                                        <om:Property Name="IsGhostBranch" Value="True" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Else" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                                <om:Element Type="Decision" OID="1c62ca0e-7135-425c-ada8-e5b0747bfb98" ParentLink="ComplexStatement_Statement" LowerBound="598.1" HigherBound="625.1">
                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                    <om:Property Name="Name" Value="Decide_BTLOL" />
                                    <om:Property Name="Signal" Value="True" />
                                    <om:Element Type="DecisionBranch" OID="8316060d-eb1c-4f02-b752-123b5b3419b1" ParentLink="ReallyComplexStatement_Branch" LowerBound="599.29" HigherBound="625.1">
                                        <om:Property Name="Expression" Value="nRecordCountBTLOL &gt; 0 " />
                                        <om:Property Name="IsGhostBranch" Value="True" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="WhenBTLOLRecordsExist" />
                                        <om:Property Name="Signal" Value="True" />
                                        <om:Element Type="Construct" OID="e28f2249-253c-418f-adea-b4535bda4dcf" ParentLink="ComplexStatement_Statement" LowerBound="601.1" HigherBound="607.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="Con_BTLOLErrorMessage" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="MessageRef" OID="128b09f7-e7a9-4f08-9866-d850bef7d617" ParentLink="Construct_MessageRef" LowerBound="602.43" HigherBound="602.67">
                                                <om:Property Name="Ref" Value="MessageSingleInputMapped" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                            <om:Element Type="Transform" OID="ed113800-f1d7-4621-994f-7fb7efa105bf" ParentLink="ComplexStatement_Statement" LowerBound="604.1" HigherBound="606.1">
                                                <om:Property Name="ClassName" Value="CartMigration.TransformCSRequestToBTLOLSQL" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Transform_3" />
                                                <om:Property Name="Signal" Value="False" />
                                                <om:Element Type="MessagePartRef" OID="dfa6ddaa-ea87-4158-ac71-8c748e0bd82c" ParentLink="Transform_OutputMessagePartRef" LowerBound="605.48" HigherBound="605.72">
                                                    <om:Property Name="MessageRef" Value="MessageSingleInputMapped" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="MessagePartReference_12" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                                <om:Element Type="MessagePartRef" OID="4d73b74d-5b20-483e-bfd1-1f1c5e028a48" ParentLink="Transform_InputMessagePartRef" LowerBound="605.120" HigherBound="605.148">
                                                    <om:Property Name="MessageRef" Value="MessageRequestCommerceBackup" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="MessagePartReference_11" />
                                                    <om:Property Name="Signal" Value="False" />
                                                </om:Element>
                                            </om:Element>
                                        </om:Element>
                                        <om:Element Type="Send" OID="cba72cef-bb3c-4274-a8cf-04d1fe7cb873" ParentLink="ComplexStatement_Statement" LowerBound="607.1" HigherBound="609.1">
                                            <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                            <om:Property Name="MessageName" Value="MessageSingleInputMapped" />
                                            <om:Property Name="OperationName" Value="procSetBasketError" />
                                            <om:Property Name="OperationMessageName" Value="Request" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="SendToSQLBTLOL" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                        <om:Element Type="Receive" OID="6c1abb66-66fa-45ff-878a-dd79c24a0138" ParentLink="ComplexStatement_Statement" LowerBound="609.1" HigherBound="611.1">
                                            <om:Property Name="Activate" Value="False" />
                                            <om:Property Name="PortName" Value="PortCallSQLRepository" />
                                            <om:Property Name="MessageName" Value="MessageCartsFromSQLErrorUpdateResponse" />
                                            <om:Property Name="OperationName" Value="procSetBasketError" />
                                            <om:Property Name="OperationMessageName" Value="Response" />
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="ReceiveCartFailuresSQLReplyBTLOL" />
                                            <om:Property Name="Signal" Value="True" />
                                        </om:Element>
                                        <om:Element Type="Decision" OID="288f0744-6f8d-4dd3-ab57-605c45678370" ParentLink="ComplexStatement_Statement" LowerBound="611.1" HigherBound="624.1">
                                            <om:Property Name="ReportToAnalyst" Value="True" />
                                            <om:Property Name="Name" Value="Decide_ArchiveMsgToSQL" />
                                            <om:Property Name="Signal" Value="True" />
                                            <om:Element Type="DecisionBranch" OID="e882b021-5119-4304-ad26-270729da2816" ParentLink="ReallyComplexStatement_Branch" LowerBound="612.33" HigherBound="624.1">
                                                <om:Property Name="Expression" Value="varIsArchive_MessageToSQL == true" />
                                                <om:Property Name="IsGhostBranch" Value="True" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="ArchiveMsgToSQL?" />
                                                <om:Property Name="Signal" Value="False" />
                                                <om:Element Type="Construct" OID="05b2f224-628c-4477-9d2b-f53ff4432da1" ParentLink="ComplexStatement_Statement" LowerBound="614.1" HigherBound="621.1">
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="ConstructArchiveMessageCartsFrCommerceReply" />
                                                    <om:Property Name="Signal" Value="True" />
                                                    <om:Element Type="MessageRef" OID="e31327d7-6d92-4bf6-a45e-f14b8f46cb15" ParentLink="Construct_MessageRef" LowerBound="615.47" HigherBound="615.73">
                                                        <om:Property Name="Ref" Value="ArchiveMessageToSQLRequest" />
                                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                                        <om:Property Name="Signal" Value="False" />
                                                    </om:Element>
                                                    <om:Element Type="MessageAssignment" OID="2619e911-7b62-4c6e-8ef2-6cbb2498678f" ParentLink="ComplexStatement_Statement" LowerBound="617.1" HigherBound="620.1">
                                                        <om:Property Name="Expression" Value="ArchiveMessageToSQLRequest = MessageSingleInputMapped; &#xD;&#xA;ArchiveMessageToSQLRequest(FILE.ReceivedFileName)=&quot;MessageCartsToSQLRequest&quot;; " />
                                                        <om:Property Name="ReportToAnalyst" Value="False" />
                                                        <om:Property Name="Name" Value="MessageAssignment_1" />
                                                        <om:Property Name="Signal" Value="True" />
                                                    </om:Element>
                                                </om:Element>
                                                <om:Element Type="Send" OID="45f5a4f7-83cd-4f26-8b90-6429beb34b52" ParentLink="ComplexStatement_Statement" LowerBound="621.1" HigherBound="623.1">
                                                    <om:Property Name="PortName" Value="ArchivePort_MessageToSQLRequest" />
                                                    <om:Property Name="MessageName" Value="ArchiveMessageToSQLRequest" />
                                                    <om:Property Name="OperationName" Value="Operation_1" />
                                                    <om:Property Name="OperationMessageName" Value="Request" />
                                                    <om:Property Name="ReportToAnalyst" Value="True" />
                                                    <om:Property Name="Name" Value="Send_2_ArchivePort_CartFailuresSQLReply" />
                                                    <om:Property Name="Signal" Value="True" />
                                                </om:Element>
                                            </om:Element>
                                            <om:Element Type="DecisionBranch" OID="85354d6d-dbcd-4be2-b1c9-a380bbf7e67a" ParentLink="ReallyComplexStatement_Branch">
                                                <om:Property Name="IsGhostBranch" Value="True" />
                                                <om:Property Name="ReportToAnalyst" Value="True" />
                                                <om:Property Name="Name" Value="Else" />
                                                <om:Property Name="Signal" Value="False" />
                                            </om:Element>
                                        </om:Element>
                                    </om:Element>
                                    <om:Element Type="DecisionBranch" OID="aa1f9b1d-5909-4b8f-b1a9-064da8e55010" ParentLink="ReallyComplexStatement_Branch">
                                        <om:Property Name="IsGhostBranch" Value="True" />
                                        <om:Property Name="ReportToAnalyst" Value="True" />
                                        <om:Property Name="Name" Value="Else" />
                                        <om:Property Name="Signal" Value="False" />
                                    </om:Element>
                                </om:Element>
                            </om:Element>
                            <om:Element Type="DecisionBranch" OID="3f1655e7-2994-4997-bbc8-289e18a88e0b" ParentLink="ReallyComplexStatement_Branch">
                                <om:Property Name="IsGhostBranch" Value="True" />
                                <om:Property Name="ReportToAnalyst" Value="True" />
                                <om:Property Name="Name" Value="Else" />
                                <om:Property Name="Signal" Value="False" />
                            </om:Element>
                        </om:Element>
                    </om:Element>
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="ba474d6a-84b3-4579-af3b-0245c483a1b3" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="146.1" HigherBound="148.1">
                <om:Property Name="PortModifier" Value="Implements" />
                <om:Property Name="Orientation" Value="Left" />
                <om:Property Name="PortIndex" Value="-1" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.ReceiveFromSQLPortType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ReceiveCartsPortFromSQL" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="58ae0b58-f9b3-4fd0-a4e9-9656cba33d65" ParentLink="PortDeclaration_CLRAttribute" LowerBound="146.1" HigherBound="147.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="387ca99c-bdcd-409a-b30a-7336f1627b39" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="148.1" HigherBound="150.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="42" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.ArchiveReplyFromCommercePortType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ArchivePort_MessageCartsFrCommerceReply" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="9a7c52ad-79a2-41d6-a5df-cb00aa3461e5" ParentLink="PortDeclaration_CLRAttribute" LowerBound="148.1" HigherBound="149.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="4b2b54ef-554e-4f31-865d-cdf4ac212105" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="150.1" HigherBound="152.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="36" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.IOrdersService" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="PortCallWCFService" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="LogicalBindingAttribute" OID="21208268-18e5-46a4-b854-846723a49c29" ParentLink="PortDeclaration_CLRAttribute" LowerBound="150.1" HigherBound="151.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="d74d6a7f-6f2e-49a5-b235-bc55f71ebb54" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="152.1" HigherBound="154.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="14" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.ArchivePortType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ArchivePort_MessageFromSQL" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="f3651d79-6b8b-4318-b445-898cbe40e245" ParentLink="PortDeclaration_CLRAttribute" LowerBound="152.1" HigherBound="153.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="e62e08a4-9a38-44cb-a73c-8871c9d3557a" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="154.1" HigherBound="156.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="33" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.PortType_2" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ArchivePort_MessageCartsToCommerceRequest" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="b46df2cb-b7ad-4f93-bbe6-3733e754c1f1" ParentLink="PortDeclaration_CLRAttribute" LowerBound="154.1" HigherBound="155.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="23c4ffd2-24d0-4bcf-b17a-4391efc9cc1b" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="156.1" HigherBound="158.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="121" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.PortTypeForTesting" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="ArchivePort_MessageToSQLRequest" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="781e4cc6-b70a-4c65-b65c-b4c955b4aa7b" ParentLink="PortDeclaration_CLRAttribute" LowerBound="156.1" HigherBound="157.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="a4c174fd-f43f-47c7-8660-c7c89261ae44" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="158.1" HigherBound="160.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Left" />
                <om:Property Name="PortIndex" Value="125" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.PortType_4" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="PortCallSQLRepository" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="a995bab5-20b3-4261-b793-be67f2692cd3" ParentLink="PortDeclaration_CLRAttribute" LowerBound="158.1" HigherBound="159.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="af666820-641f-4d8f-9166-460246786e45" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="160.1" HigherBound="162.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="-1" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.FaultPortType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="FaultPort" />
                <om:Property Name="Signal" Value="False" />
                <om:Element Type="DirectBindingAttribute" OID="38c07b55-edd6-405a-b17c-1e9111827cbc" ParentLink="PortDeclaration_CLRAttribute" LowerBound="160.1" HigherBound="161.1">
                    <om:Property Name="DirectBindingType" Value="MessageBox" />
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="c2e0e5af-74f1-463b-8342-bf7bb91e1aed" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="162.1" HigherBound="164.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="-1" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.EmailSQLFailuresFromCommercePortType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="EmailSQLFailuresFromCommcerce" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="1eea3a14-8e39-4592-850b-99f7e1d18cd9" ParentLink="PortDeclaration_CLRAttribute" LowerBound="162.1" HigherBound="163.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
            <om:Element Type="PortDeclaration" OID="c13a2c9e-1801-4a15-896c-031e82284ad2" ParentLink="ServiceDeclaration_PortDeclaration" LowerBound="164.1" HigherBound="166.1">
                <om:Property Name="PortModifier" Value="Uses" />
                <om:Property Name="Orientation" Value="Right" />
                <om:Property Name="PortIndex" Value="140" />
                <om:Property Name="IsWebPort" Value="False" />
                <om:Property Name="OrderedDelivery" Value="False" />
                <om:Property Name="DeliveryNotification" Value="None" />
                <om:Property Name="Type" Value="CartMigration.EmailFailurePortType" />
                <om:Property Name="ParamDirection" Value="In" />
                <om:Property Name="ReportToAnalyst" Value="True" />
                <om:Property Name="Name" Value="EmailFailurePort" />
                <om:Property Name="Signal" Value="True" />
                <om:Element Type="LogicalBindingAttribute" OID="61ef28c2-6e42-4656-ab87-ec4de2511614" ParentLink="PortDeclaration_CLRAttribute" LowerBound="164.1" HigherBound="165.1">
                    <om:Property Name="Signal" Value="False" />
                </om:Element>
            </om:Element>
        </om:Element>
    </om:Element>
</om:MetaModel>
#endif // __DESIGNER_DATA
[Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
module CartMigration
{
    internal messagetype IOrdersService_CreateLegacyBasket_InputMessage
    {
        body IOrder_tempuri_org.CreateLegacyBasket parameters;
    };
    internal messagetype IOrdersService_CreateLegacyBasket_OutputMessage
    {
        body IOrder_tempuri_org.CreateLegacyBasketResponse parameters;
    };
    internal messagetype IOrdersService_CreateLegacyBaskets_InputMessage
    {
        body IOrder_tempuri_org.CreateLegacyBaskets parameters;
    };
    internal messagetype IOrdersService_CreateLegacyBaskets_OutputMessage
    {
        body IOrder_tempuri_org.CreateLegacyBasketsResponse parameters;
    };
    internal messagetype MultipartType_1
    {
        body BTS.soap_envelope_1__1.Fault MessagePart_1;
    };
    internal porttype IOrdersService
    {
        requestresponse CreateLegacyBaskets
        {
            IOrdersService_CreateLegacyBaskets_InputMessage, IOrdersService_CreateLegacyBaskets_OutputMessage, Fault_1 = MultipartType_1
        };
    };
    internal porttype ReceiveFromSQLPortType
    {
        oneway Operation_1
        {
            xml_cartmigration_sp
        };
    };
    internal porttype PortTypeCallToCommerce
    {
        requestresponse Operation_1
        {
            IOrdersService_CreateLegacyBaskets_InputMessage, IOrdersService_CreateLegacyBaskets_OutputMessage
        };
    };
    internal porttype PortTypeForTesting
    {
        oneway Operation_1
        {
            CartMigrationErrorProcedure_dbo.procSetBasketError
        };
    };
    internal porttype ArchivedPortType
    {
        oneway Operation_1
        {
            xml_cartmigration_sp
        };
    };
    internal porttype ArchivePortType
    {
        oneway Operation_1
        {
            System.Xml.XmlDocument
        };
    };
    internal porttype ArchivePortMessageToCommercePortType
    {
        oneway Operation_1
        {
            System.Xml.XmlDocument
        };
    };
    internal porttype PortType_1
    {
        oneway Operation_1
        {
            IOrdersService_CreateLegacyBaskets_OutputMessage
        };
    };
    internal porttype ArchiveReplyFromCommercePortType
    {
        oneway Operation_1
        {
            IOrdersService_CreateLegacyBaskets_OutputMessage
        };
    };
    internal porttype ArchivePortMessageToCommercePortTypes
    {
        oneway Operation_1
        {
            System.Xml.XmlDocument
        };
    };
    internal porttype PortType_2
    {
        oneway Operation_1
        {
            IOrdersService_CreateLegacyBaskets_InputMessage
        };
    };
    internal porttype PortType_3
    {
        oneway Operation_1
        {
            CartMigrationErrorProcedure_dbo.procSetBasketError
        };
    };
    internal porttype PortType_4
    {
        requestresponse procSetBasketError
        {
            CartMigrationErrorProcedure_dbo.procSetBasketError, CartMigrationErrorProcedure_dbo.procSetBasketErrorResponse
        };
    };
    internal porttype FaultPortType
    {
        oneway Operation_1
        {
            Microsoft.Practices.ESB.ExceptionHandling.Schemas.Faults.FaultMessage
        };
    };
    internal porttype EmailFailurePortType
    {
        oneway Operation_1
        {
            Microsoft.Practices.ESB.ExceptionHandling.Schemas.Faults.FaultMessage
        };
    };
    internal porttype EmailSQLFailuresFromCommercePortType
    {
        oneway Operation_1
        {
            MessageCartsFromSQLType
        };
    };
    internal porttype PortCallWCFServicePortType_2
    {
        requestresponse Operation_1
        {
            IOrder_tempuri_org.CreateLegacyBaskets, IOrder_tempuri_org.CreateLegacyBasketsResponse
        };
    };
    [Microsoft.XLANGs.BaseTypes.BPELExportable(false)]
    internal service OrdersServiceClient
    {
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port implements ReceiveFromSQLPortType ReceiveCartsPortFromSQL;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses ArchiveReplyFromCommercePortType ArchivePort_MessageCartsFrCommerceReply;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses IOrdersService PortCallWCFService;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses ArchivePortType ArchivePort_MessageFromSQL;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses PortType_2 ArchivePort_MessageCartsToCommerceRequest;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses PortTypeForTesting ArchivePort_MessageToSQLRequest;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses PortType_4 PortCallSQLRepository;
        [Microsoft.XLANGs.BaseTypes.DirectBinding()]
        port uses FaultPortType FaultPort;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses EmailSQLFailuresFromCommercePortType EmailSQLFailuresFromCommcerce;
        [Microsoft.XLANGs.BaseTypes.LogicalBinding()]
        port uses EmailFailurePortType EmailFailurePort;
        message CartMigrationErrorProcedure_dbo.procSetBasketError MessageSingleInputMapped;
        message xml_cartmigration_sp MessageCartsFromSQL;
        message IOrdersService_CreateLegacyBaskets_InputMessage MessageCartsToCommerceRequest;
        message IOrdersService_CreateLegacyBaskets_OutputMessage MessageCartsFrCommerceReply;
        message System.Xml.XmlDocument ArchiveMessageFromSQL;
        message IOrdersService_CreateLegacyBaskets_InputMessage ArchiveMessageCartsToCommerceRequest;
        message IOrdersService_CreateLegacyBaskets_OutputMessage ArchiveMessageCartsFrCommerceReply;
        message CartMigrationErrorBackupSchema MessageReplyCommerceBackup;
        message MessageCartsFromSQLType MessageSingleInput;
        message CartMigrationErrorProcedure_dbo.procSetBasketErrorResponse MessageCartsFromSQLErrorUpdateResponse;
        message CartMigrationErrorProcedure_dbo.procSetBasketError ArchiveMessageToSQLRequest;
        message Microsoft.Practices.ESB.ExceptionHandling.Schemas.Faults.FaultMessage FaultMessage;
        message System.Xml.XmlDocument MessageDummyCartsFromSQL;
        message MessageCartsFromSQLType MessageSingleInputEmail;
        message CartMigrationRequestBackup MessageRequestCommerceBackup;
        message MultipartType_1 Message_1;
        message CartMigrationRequestBackup MessageRequestCommerceRequestBackupScope2;
        System.String sErrorMessageSQL;
        System.Int32 nRecordCount;
        System.Int32 nLoopCount;
        System.String sXpath;
        System.Xml.XmlDocument xDoc;
        System.String sStatus;
        System.Xml.XmlDocument xDoctemp;
        System.Boolean varIsEmailForTesting;
        System.Boolean varIsArchive_MessageFromSQL;
        System.Boolean varIsArchive_MessageToCommerceRequest;
        System.Boolean varIsArchive_MessageFromCommerceReply;
        System.Boolean varIsArchive_MessageToSQL;
        System.Boolean varIsEmailForSQLFailuresFromCommerce;
        System.String sErrorMessage;
        System.Xml.XmlDocument varXMLDummy;
        System.Int32 nRecordCountTS3;
        System.Int32 nRecordCountBTLOL;
        System.Int32 varSQLOk;
        body ()
        {
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("bb38dfe6-4971-428d-ac54-730e47c30c02")]
            activate receive (ReceiveCartsPortFromSQL.Operation_1, MessageCartsFromSQL);
            sErrorMessageSQL = "";
            nRecordCount = 0;
            nLoopCount = 1;
            sXpath = "";
            xDoc = new System.Xml.XmlDocument();
            sStatus = "";
            xDoctemp = new System.Xml.XmlDocument();
            varIsEmailForTesting = true;
            varIsArchive_MessageFromSQL = true;
            varIsArchive_MessageToCommerceRequest = true;
            varIsArchive_MessageFromCommerceReply = true;
            varIsArchive_MessageToSQL = true;
            varIsEmailForSQLFailuresFromCommerce = true;
            sErrorMessage = "";
            varXMLDummy = new System.Xml.XmlDocument();
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("c69f03ee-9e7a-462c-8131-ebaff95c56ac")]
            // 0 = have not hit the call to WCF service to push carts to Commerce Server. 
            // 1 = after the call to WCF service and updating the status to failed is not allowed. 
            varSQLOk = 0; 
            
            //varSQLOk = varSQLOk / varSQLOk; 
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("7629e2d5-2755-45fb-bff2-eeeade1b6a4a")]
            construct MessageReplyCommerceBackup
            {
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("84e7fa1f-e954-4d30-9edd-e86d82eac92c")]
                varXMLDummy = new System.Xml.XmlDocument();
                varXMLDummy.LoadXml(@"<CreateLegacyBasketsResponse xmlns=""http://tempuri.org/""><CreateLegacyBasketsResult xmlns:a=""http://schemas.datacontract.org/2004/07/BTNextGen.Services.IOrders"" xmlns:i=""http://www.w3.org/2001/XMLSchema-instance""><a:BasketDetailsResponse><a:ErrorMessage> </a:ErrorMessage><a:LegacyBasketId>13759439</a:LegacyBasketId><a:LegacySourceSystem>TS3</a:LegacySourceSystem><a:LoadStatus>Loaded</a:LoadStatus></a:BasketDetailsResponse></CreateLegacyBasketsResult></CreateLegacyBasketsResponse>");
                MessageReplyCommerceBackup = varXMLDummy; 
            }
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("9ed1de09-f7b9-47c3-9edc-b64b87d50385")]
            construct MessageRequestCommerceBackup
            {
                [Microsoft.XLANGs.BaseTypes.DesignerPosition("9a25227a-c822-4448-937f-cec3870e7638")]
                transform (MessageRequestCommerceBackup) = CartMigration.Transform_4 (MessageCartsFromSQL);
            }
            [Microsoft.XLANGs.BaseTypes.DesignerPosition("fcad5daa-d082-40ee-81d6-caf4039af3f4")]
            scope
            {
                body
                {
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("aba46766-f9a4-45b9-9414-f1876a27c211")]
                    varIsEmailForTesting=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read("BTNextGen.Biztalk.CartMigration","EmailForTesting"));
                    varIsArchive_MessageFromSQL=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read("BTNextGen.Biztalk.CartMigration","Archive_MessageFromSQL")); 
                    varIsArchive_MessageToCommerceRequest=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read("BTNextGen.Biztalk.CartMigration","Archive_MessageToCommerceRequest")); 
                    varIsArchive_MessageFromCommerceReply=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read("BTNextGen.Biztalk.CartMigration","Archive_MessageFromCommerceReply")); 
                    varIsArchive_MessageToSQL=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read("BTNextGen.Biztalk.CartMigration","Archive_MessageToSQL")); 
                    varIsEmailForSQLFailuresFromCommerce=System.Convert.ToBoolean(SSO.Utility.SSOClientHelper.Read("BTNextGen.Biztalk.CartMigration","EmailForSQLFailuresFromCommerce")); 
                    
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("f7a5f903-fa56-4afb-b007-11ab7b1f4ebb")]
                    if (varIsArchive_MessageFromSQL == true)
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("179977b0-f935-4a77-9822-bfcda2374cce")]
                        construct ArchiveMessageFromSQL
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("917b8573-3efd-4eab-8168-f8a26758d4a0")]
                            ArchiveMessageFromSQL = MessageCartsFromSQL; 
                            ArchiveMessageFromSQL(FILE.ReceivedFileName)="MessageCartsFromSQL"; 
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("b6ae52a9-75b4-448a-bfbc-d1ee8b84a559")]
                        send (ArchivePort_MessageFromSQL.Operation_1, ArchiveMessageFromSQL);
                    }
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("46b2865a-2434-49a6-9299-f22c4a4ce30a")]
                    construct MessageCartsToCommerceRequest
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("9d3b1498-c549-4c4c-8a4a-1b9c13ba6db5")]
                        transform (MessageCartsToCommerceRequest.parameters) = CartMigration.Transform_sql_to_commerce (MessageCartsFromSQL);
                    }
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("732f0b7e-3b39-42c2-871d-fb7400cd067c")]
                    if (varIsArchive_MessageToCommerceRequest == true)
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("8d4f1ba6-b9d7-4960-956c-fae6932e6d02")]
                        construct ArchiveMessageCartsToCommerceRequest
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("e74c0d09-41c6-48a8-b149-3e13a6f759aa")]
                            ArchiveMessageCartsToCommerceRequest = MessageCartsToCommerceRequest; 
                            ArchiveMessageCartsToCommerceRequest(FILE.ReceivedFileName)="MessageCartsToCommerceRequest"; 
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("220d979c-9aaa-4610-8edb-e98d1e0b3f4b")]
                        send (ArchivePort_MessageCartsToCommerceRequest.Operation_1, ArchiveMessageCartsToCommerceRequest);
                    }
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("9c2a1141-de57-4da9-afe8-a73f72fae4f2")]
                    scope
                    {
                        body
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("d096f110-4a1d-4805-97f0-3a7cd0853570")]
                            construct MessageRequestCommerceBackup
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("6e313f88-5eda-4a73-b96b-15274ca98330")]
                                transform (MessageRequestCommerceBackup) = CartMigration.Transform_5 (MessageCartsToCommerceRequest.parameters);
                            }
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("36b5d7cb-f9b7-4627-8651-a1179b280921")]
                            send (PortCallWCFService.CreateLegacyBaskets, MessageCartsToCommerceRequest);
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("0cc4ee17-0a93-4e4d-8a4b-37eae9d0871a")]
                            receive (PortCallWCFService.CreateLegacyBaskets, MessageCartsFrCommerceReply);
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("35914f55-c9de-4ca7-adb6-a6df2efb12b5")]
                            // 0 = have not hit the call to WCF service to push carts to Commerce Server. 
                            // 1 = after the call to WCF service and updating the status to failed is not allowed. 
                            varSQLOk = 1; 
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("d5a58c48-844d-45b4-a265-f2acb536e00c")]
                            if (varIsArchive_MessageFromCommerceReply == true)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("80cf3955-1cc7-4cb0-9384-be0bec2e1216")]
                                construct ArchiveMessageCartsFrCommerceReply
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("18979352-ce34-4a0c-8944-7781be84dff7")]
                                    ArchiveMessageCartsFrCommerceReply = MessageCartsFrCommerceReply; 
                                    ArchiveMessageCartsFrCommerceReply(FILE.ReceivedFileName)="MessageCartsFrCommerceReply"; 
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("081d91f9-3274-4688-b092-8165e98aed83")]
                                send (ArchivePort_MessageCartsFrCommerceReply.Operation_1, ArchiveMessageCartsFrCommerceReply);
                            }
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("c1307eeb-757f-460e-86a3-54ff09fee96b")]
                            construct MessageReplyCommerceBackup
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("f70381f7-ecbd-41d5-b025-280c3a79375b")]
                                transform (MessageReplyCommerceBackup) = CartMigration.TransformCommerceReplyToBackup (MessageCartsFrCommerceReply.parameters);
                            }
                        }
                        exceptions
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("4f959f2a-c83b-4b82-8010-f0f905a06f56")]
                            catch (PortCallWCFService.CreateLegacyBaskets.Fault_1 ex)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("c136d702-11e1-4d2c-8a9d-b162c3af5465")]
                                construct FaultMessage
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("52c407b9-c4d8-4684-8225-07f6fe0d275f")]
                                    xDoc = ex.MessagePart_1;
                                    sErrorMessage = xDoc.OuterXml;
                                    // Create fault exception Message
                                    FaultMessage= Microsoft.Practices.ESB.ExceptionHandling.ExceptionMgmt.CreateFaultMessage();
                                    
                                    // Assign Properties
                                    FaultMessage.FailureCategory="CartMigration Exception";
                                    FaultMessage.FaultDescription=sErrorMessage;
                                    FaultMessage.FaultCode="3001";
                                    FaultMessage.FaultSeverity= Microsoft.Practices.ESB.ExceptionHandling.FaultSeverity.Severe;
                                    
                                    
                                    
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("bb7ed407-b4f9-4842-8a82-4eae4f72d4f4")]
                                send (FaultPort.Operation_1, FaultMessage);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("3b005b02-b6db-4cfe-bfcd-a76fe2384906")]
                                if (varIsEmailForTesting == true)
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("9884c538-62a7-4471-820c-15922c211286")]
                                    System.Diagnostics.EventLog.WriteEntry("CartMigration-2",sErrorMessage );
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("ea57bf14-383f-44ab-a39a-6ab0238ced99")]
                                    send (EmailFailurePort.Operation_1, FaultMessage);
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("9f456258-f8f6-4e6a-896c-02d45658924b")]
                                if (varIsEmailForTesting == true)
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("ecb0cd8a-325d-4626-a0d9-d59473a9e784")]
                                    System.Diagnostics.EventLog.WriteEntry("CartMigration-2",sErrorMessage );
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("d1ca781a-10c3-4857-abbe-9e1e0793e531")]
                                    send (EmailFailurePort.Operation_1, FaultMessage);
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("f6efb955-cc0f-454a-abe2-928ca6b5e12b")]
                                if (varSQLOk == 0 )
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("f4fd7b4a-e302-4a1c-89fa-d7eebf604f37")]
                                    //sXpath = "count(/*[local-name()='CartMigrationErrorResponses' and namespace-uri()='http://CartMigration.CartMigrationErrorBackupSchema']/*[local-name()='CartMigrationErrorResponse' and namespace-uri()='']/*[local-name()='CartMigrationErrorListing' and namespace-uri()='']";
                                    //nRecordCount = System.Convert.ToInt32(xpath(MessageReplyCommerceBackup,sXpath)); 
                                    //xDoc = new System.Xml.XmlDocument(); 
                                    
                                    //System.Diagnostics.EventLog.WriteEntry("CartMigration", "Hello");
                                    nRecordCountBTLOL = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(/*[local-name()='CartMigrationRequestBackup' and namespace-uri()='http://CartMigration.CartMigrationRequestBackup']/*[local-name()='BasketList' and namespace-uri()='']/*[local-name()='BasketDetails' and namespace-uri()='']/*[local-name()='LegacySourceSystem' and namespace-uri()=''][.='BTLOL'])"));
                                    //nRecordCountBTLOL = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(//LegacySourceSystem][.='BTLOL'])"));
                                    
                                    //nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(//LegacySourceSystem>TS3)"));
                                    nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(/*[local-name()='CartMigrationRequestBackup' and namespace-uri()='http://CartMigration.CartMigrationRequestBackup']/*[local-name()='BasketList' and namespace-uri()='']/*[local-name()='BasketDetails' and namespace-uri()='']/*[local-name()='LegacySourceSystem' and namespace-uri()=''][.='TS3'])"));
                                    //nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(//LegacySourceSystem][.='TS3'])"));
                                    
                                    
                                    
                                    if (sErrorMessage.Length > 100)
                                    {
                                    sErrorMessageSQL = sErrorMessage.Substring(0,100); 
                                    }
                                    
                                    
                                    
                                    
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("c754fbf1-2bd1-4443-85f1-c07b79754537")]
                                    if (nRecordCountTS3 > 0)
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("f5fd088a-f867-4913-a2d9-7269be367ea2")]
                                        construct MessageSingleInputMapped
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("92d8cad1-4f81-4738-80b7-0213aac826fb")]
                                            transform (MessageSingleInputMapped) = CartMigration.TransformCSRequestToTS3SQL (MessageRequestCommerceBackup);
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("c425f4fb-c628-4077-865d-836caf5e53a0")]
                                            MessageSingleInputMapped.pstrErrorMessage =sErrorMessage;
                                        }
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("ec3b4784-0563-4a15-8952-d813747f4119")]
                                        if (varIsArchive_MessageToSQL == true)
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("d60a269e-fe2d-4f64-adaf-5a34f0e5089d")]
                                            construct ArchiveMessageToSQLRequest
                                            {
                                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("cf68be27-7e28-4716-9697-87cc1cd62340")]
                                                ArchiveMessageToSQLRequest = MessageSingleInputMapped; 
                                                ArchiveMessageToSQLRequest(FILE.ReceivedFileName)="MessageCartsToSQLRequest"; 
                                            }
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("41da3904-c468-4bd6-8e3e-dc51004f7a75")]
                                            send (ArchivePort_MessageToSQLRequest.Operation_1, ArchiveMessageToSQLRequest);
                                        }
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("50ace482-0e3d-4aa5-be28-92d3a233c882")]
                                        send (PortCallSQLRepository.procSetBasketError, MessageSingleInputMapped);
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("d3ad5aea-8f00-4467-965d-da6ef1d3f994")]
                                        receive (PortCallSQLRepository.procSetBasketError, MessageCartsFromSQLErrorUpdateResponse);
                                    }
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("92de5004-c39d-4cf6-92b0-aa4bf488c170")]
                                    if (nRecordCountBTLOL > 0 )
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("e4438cac-e1ae-4f88-8a23-33c9604b81f0")]
                                        construct MessageSingleInputMapped
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("3c674bb3-72ec-4b88-937e-f9428c63c95f")]
                                            transform (MessageSingleInputMapped) = CartMigration.TransformCSRequestToBTLOLSQL (MessageRequestCommerceBackup);
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("6f711859-3b85-4b5f-b837-251aa4eed568")]
                                            MessageSingleInputMapped.pstrErrorMessage =sErrorMessage;
                                        }
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("3eb04fb2-bd1f-408d-a31d-cff4b6daff2a")]
                                        if (varIsArchive_MessageToSQL == true)
                                        {
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("9eb68f74-af1b-4876-beeb-ee44b7715200")]
                                            construct ArchiveMessageToSQLRequest
                                            {
                                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("90cbed76-308b-40a5-bda5-5423826a1352")]
                                                ArchiveMessageToSQLRequest = MessageSingleInputMapped; 
                                                ArchiveMessageToSQLRequest(FILE.ReceivedFileName)="MessageCartsToSQLRequest"; 
                                            }
                                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("feb060a7-484a-4e86-9298-ccf5bab07a6c")]
                                            send (ArchivePort_MessageToSQLRequest.Operation_1, ArchiveMessageToSQLRequest);
                                        }
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("5c51a4b6-262c-459b-b43b-4276ce316d7b")]
                                        send (PortCallSQLRepository.procSetBasketError, MessageSingleInputMapped);
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("dc3b9981-d8d8-43e5-8600-a8ae86dbb52b")]
                                        receive (PortCallSQLRepository.procSetBasketError, MessageCartsFromSQLErrorUpdateResponse);
                                    }
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("8209bd67-3d33-4c41-a0e8-50fc7d25dd4a")]
                                terminate "Process terminated due to exception encountered when transmitting file to Commerce Server";;
                            }
                        }
                    }
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("7a844259-681a-47e8-a82a-98210c63d908")]
                    //sXpath = "count(/*[local-name()='CartMigrationErrorResponses' and namespace-uri()='http://CartMigration.CartMigrationErrorBackupSchema']/*[local-name()='CartMigrationErrorResponse' and namespace-uri()='']/*[local-name()='CartMigrationErrorListing' and namespace-uri()='']";
                    //nRecordCount = System.Convert.ToInt32(xpath(MessageReplyCommerceBackup,sXpath)); 
                    //xDoc = new System.Xml.XmlDocument(); 
                    
                    //System.Diagnostics.EventLog.WriteEntry("CartMigration", "Hello");
                    nRecordCount = System.Convert.ToInt32(xpath(MessageReplyCommerceBackup, "count(//CartMigrationErrorListing)"));
                    
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("cb39cf21-0c74-4ba2-b657-b724ed45fb78")]
                    while (nLoopCount <= nRecordCount)
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("8ae5b4f7-49ab-4705-9251-a95b4c5f480b")]
                        construct MessageSingleInput
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("696a19e3-aba1-4248-9d90-30cc7cf5e209")]
                            //MessageSingleInputX.LoadXml(@"<ns0:CartMigrationErrorResponses xmlns:ns0=""http://CartMigration.CartMigrationErrorBackupSchema""><CartMigrationErrorResponse><CartMigrationErrorListing><ErrorMessage></ErrorMessage><BasketID></BasketID<SourceSystem></SourceSystem><Status></Status></CartMigrationErrorListing></CartMigrationErrorResponse></ns0:CartMigrationErrorResponses>");
                            //MessageSingleInputX = xDoctemp; 
                            //MessageSingleInputX = xDoc; 
                            //MessageSingleInputX(XMLNORM.AllowUnrecognizedMessage) = true; 
                            sXpath = System.String.Format("//CartMigrationErrorListing[{0}]",nLoopCount);
                            MessageSingleInput = xpath(MessageReplyCommerceBackup,sXpath); 
                            
                            //sStatus = xpath(MessageReplyCommerceBackup,"string(//Status)"); 
                            sStatus = xpath(MessageSingleInput,"string(//Status)");
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("b964a3ef-9f5f-4710-b28d-f3b3deb5e86d")]
                        if (sStatus == "Failed")
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("7d2dc7f6-4b07-443e-8ed2-811cea3171f0")]
                            construct MessageSingleInputMapped
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("8241981c-74ab-4730-8e88-1e99442c00dc")]
                                transform (MessageSingleInputMapped) = CartMigration.Transform_2 (MessageSingleInput);
                            }
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("cfa3945a-b8a3-44ed-9768-f7392e0fbfed")]
                            send (PortCallSQLRepository.procSetBasketError, MessageSingleInputMapped);
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("66d88532-fb9c-408b-86a3-302774478d7c")]
                            receive (PortCallSQLRepository.procSetBasketError, MessageCartsFromSQLErrorUpdateResponse);
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("bdd04a10-7d44-42cf-8d4c-782a9abec283")]
                            if (varIsArchive_MessageToSQL == true)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("bbb18503-18f4-42c9-9944-d8290b4e222e")]
                                construct ArchiveMessageToSQLRequest
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("74549720-3bca-4a89-8c7a-0d4b0d78733e")]
                                    ArchiveMessageToSQLRequest = MessageSingleInputMapped; 
                                    ArchiveMessageToSQLRequest(FILE.ReceivedFileName)="MessageCartsToSQLRequest"; 
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("d76b13ec-076e-4ead-98fa-c897bee4d78c")]
                                send (ArchivePort_MessageToSQLRequest.Operation_1, ArchiveMessageToSQLRequest);
                            }
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("2ed362fd-2b90-4926-969a-d24202cfb60e")]
                            if (varIsEmailForSQLFailuresFromCommerce==true)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("3c90f07f-0ea8-4d19-a80a-1a003c82395f")]
                                construct MessageSingleInputEmail
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("b20e79d2-006d-4aad-981a-45d472b2b709")]
                                    transform (MessageSingleInputEmail) = CartMigration.Transform_EmailFailuresToCS (MessageSingleInput);
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("104fb3ca-64ff-4d16-be71-91972ae38560")]
                                send (EmailSQLFailuresFromCommcerce.Operation_1, MessageSingleInputEmail);
                            }
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("f1c770bc-d34d-4608-b7c2-ffad1b4fcee2")]
                        nLoopCount = nLoopCount + 1; 
                    }
                }
                exceptions
                {
                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("1a3faf54-5371-48d6-930b-2ed3f1293881")]
                    catch (System.SystemException ex)
                    {
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("4109d679-0003-4318-9ab5-53e5add2b928")]
                        construct FaultMessage
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("fd4861a4-44cc-4d8f-95a3-5c30d0d932f3")]
                            // Create fault exception Message
                            FaultMessage= Microsoft.Practices.ESB.ExceptionHandling.ExceptionMgmt.CreateFaultMessage();
                            
                            // Assign Properties
                            FaultMessage.FailureCategory="CartMigration Exception";
                            FaultMessage.FaultDescription=ex.Message;
                            FaultMessage.FaultCode="3001";
                            FaultMessage.FaultSeverity= Microsoft.Practices.ESB.ExceptionHandling.FaultSeverity.Severe;
                            //Microsoft.Practices.ESB.ExceptionHandling.ExceptionMgmt.AddMessage(FaultMessage,OrgDetailsLegacy);
                            
                            
                            
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("ed5e3250-1578-4d17-ba2b-a3eff3eee298")]
                        send (FaultPort.Operation_1, FaultMessage);
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("c2d15ea7-06c5-40e4-9bd7-aef9fea40ca5")]
                        if (varIsEmailForTesting == true)
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("4d3905c3-4ac2-4799-a9da-263c0161b4bc")]
                            send (EmailFailurePort.Operation_1, FaultMessage);
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("3505d3dc-f209-46cc-9cdf-8f746078869d")]
                            System.Diagnostics.EventLog.WriteEntry("CartMigration-1",sErrorMessage );
                        }
                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("b9807fc0-5d95-4bc1-80bc-636d8d0f3c1a")]
                        if (varSQLOk == 0 )
                        {
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("58de61e8-13ea-44de-8766-2378e0100315")]
                            //sXpath = "count(/*[local-name()='CartMigrationErrorResponses' and namespace-uri()='http://CartMigration.CartMigrationErrorBackupSchema']/*[local-name()='CartMigrationErrorResponse' and namespace-uri()='']/*[local-name()='CartMigrationErrorListing' and namespace-uri()='']";
                            //nRecordCount = System.Convert.ToInt32(xpath(MessageReplyCommerceBackup,sXpath)); 
                            //xDoc = new System.Xml.XmlDocument(); 
                            
                            //System.Diagnostics.EventLog.WriteEntry("CartMigration", "Hello");
                            nRecordCountBTLOL = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(/*[local-name()='CartMigrationRequestBackup' and namespace-uri()='http://CartMigration.CartMigrationRequestBackup']/*[local-name()='BasketList' and namespace-uri()='']/*[local-name()='BasketDetails' and namespace-uri()='']/*[local-name()='LegacySourceSystem' and namespace-uri()=''][.='BTLOL'])"));
                            //nRecordCountBTLOL = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(//LegacySourceSystem][.='BTLOL'])"));
                            
                            //nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(//LegacySourceSystem>TS3)"));
                            nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(/*[local-name()='CartMigrationRequestBackup' and namespace-uri()='http://CartMigration.CartMigrationRequestBackup']/*[local-name()='BasketList' and namespace-uri()='']/*[local-name()='BasketDetails' and namespace-uri()='']/*[local-name()='LegacySourceSystem' and namespace-uri()=''][.='TS3'])"));
                            //nRecordCountTS3 = System.Convert.ToInt32(xpath(MessageRequestCommerceBackup, "count(//LegacySourceSystem][.='TS3'])"));
                            
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("bc82c78e-885c-4a51-b358-1334407b8b9c")]
                            if (nRecordCountTS3 > 0)
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("1efea044-8e4b-48a8-997c-4c628cc62374")]
                                construct MessageSingleInputMapped
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("33d62cff-2e86-4d32-adc5-7302907e0846")]
                                    transform (MessageSingleInputMapped) = CartMigration.TransformCSRequestToTS3SQL (MessageRequestCommerceBackup);
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("4ece1fa6-fe36-467f-9ad4-42a432722b8e")]
                                send (PortCallSQLRepository.procSetBasketError, MessageSingleInputMapped);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("9103f290-48d5-44bd-a871-88663602f7e6")]
                                receive (PortCallSQLRepository.procSetBasketError, MessageCartsFromSQLErrorUpdateResponse);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("cf0c63d0-08d3-4905-a652-47373485d092")]
                                if (varIsArchive_MessageToSQL == true)
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("a3a3b3a2-3a51-4911-86ba-15ca5fe5b41d")]
                                    construct ArchiveMessageToSQLRequest
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("c3609a85-8362-40a8-b1ee-de9e6d8cb8c6")]
                                        ArchiveMessageToSQLRequest = MessageSingleInputMapped; 
                                        ArchiveMessageToSQLRequest(FILE.ReceivedFileName)="MessageCartsToSQLRequest"; 
                                    }
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("188aac85-7644-422a-b078-879748910d15")]
                                    send (ArchivePort_MessageToSQLRequest.Operation_1, ArchiveMessageToSQLRequest);
                                }
                            }
                            [Microsoft.XLANGs.BaseTypes.DesignerPosition("1c62ca0e-7135-425c-ada8-e5b0747bfb98")]
                            if (nRecordCountBTLOL > 0 )
                            {
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("e28f2249-253c-418f-adea-b4535bda4dcf")]
                                construct MessageSingleInputMapped
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("ed113800-f1d7-4621-994f-7fb7efa105bf")]
                                    transform (MessageSingleInputMapped) = CartMigration.TransformCSRequestToBTLOLSQL (MessageRequestCommerceBackup);
                                }
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("cba72cef-bb3c-4274-a8cf-04d1fe7cb873")]
                                send (PortCallSQLRepository.procSetBasketError, MessageSingleInputMapped);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("6c1abb66-66fa-45ff-878a-dd79c24a0138")]
                                receive (PortCallSQLRepository.procSetBasketError, MessageCartsFromSQLErrorUpdateResponse);
                                [Microsoft.XLANGs.BaseTypes.DesignerPosition("288f0744-6f8d-4dd3-ab57-605c45678370")]
                                if (varIsArchive_MessageToSQL == true)
                                {
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("05b2f224-628c-4477-9d2b-f53ff4432da1")]
                                    construct ArchiveMessageToSQLRequest
                                    {
                                        [Microsoft.XLANGs.BaseTypes.DesignerPosition("2619e911-7b62-4c6e-8ef2-6cbb2498678f")]
                                        ArchiveMessageToSQLRequest = MessageSingleInputMapped; 
                                        ArchiveMessageToSQLRequest(FILE.ReceivedFileName)="MessageCartsToSQLRequest"; 
                                    }
                                    [Microsoft.XLANGs.BaseTypes.DesignerPosition("45f5a4f7-83cd-4f26-8b90-6429beb34b52")]
                                    send (ArchivePort_MessageToSQLRequest.Operation_1, ArchiveMessageToSQLRequest);
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

